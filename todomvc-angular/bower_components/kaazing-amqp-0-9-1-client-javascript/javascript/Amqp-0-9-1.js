function URI(a){a=a||"";var b=0,c=a.indexOf("://");if(-1!=c){this.scheme=a.slice(0,c),b=c+3;var d=a.indexOf("/",b);-1==d&&(d=a.length,a+="/");var e=a.slice(b,d);this.authority=e,b=d,this.host=e;var f=e.indexOf(":");if(-1!=f&&(this.host=e.slice(0,f),this.port=parseInt(e.slice(f+1),10),isNaN(this.port)))throw new Error("Invalid URI syntax")}var g=a.indexOf("?",b);-1!=g&&(this.path=a.slice(b,g),b=g+1);var h=a.indexOf("#",b);-1!=h?(-1!=g?this.query=a.slice(b,h):this.path=a.slice(b,h),b=h+1,this.fragment=a.slice(b)):-1!=g?this.query=a.slice(b):this.path=a.slice(b)}var Kaazing=Kaazing||{};"function"!=typeof Kaazing.namespace&&(Kaazing.namespace=function(a){var b=a.split("."),c=Kaazing;"Kaazing"===b[0]&&(b=b.slice(1));for(var d=0;d<b.length;d++)"undefined"==typeof c[b[d]]&&(c[b[d]]={}),c=c[b[d]];return c});var Logger=function(a){this._name=a,this._level=Logger.Level.INFO};!function(){Logger.Level={OFF:8,SEVERE:7,WARNING:6,INFO:5,CONFIG:4,FINE:3,FINER:2,FINEST:1,ALL:0};for(var a,b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if("kaazing:logging"===b[c].name){a=b[c].content;break}if(Logger._logConf={},a)for(var d=a.split(","),c=0;c<d.length;c++){var e=d[c].split("=");Logger._logConf[e[0]]=e[1]}var f={};Logger.getLogger=function(a){var b=f[a];return void 0===b&&(b=new Logger(a),f[a]=b),b};var g=Logger.prototype;g.setLevel=function(a){a&&a>=Logger.Level.ALL&&a<=Logger.Level.OFF&&(this._level=a)},g.isLoggable=function(a){for(var b in Logger._logConf)if(Logger._logConf.hasOwnProperty(b)&&this._name.match(b)){var c=Logger._logConf[b];if(c)return Logger.Level[c]<=a}return this._level<=a};var h=function(){},i={};i[Logger.Level.OFF]=h,i[Logger.Level.SEVERE]=window.console?console.error||console.log||h:h,i[Logger.Level.WARNING]=window.console?console.warn||console.log||h:h,i[Logger.Level.INFO]=window.console?console.info||console.log||h:h,i[Logger.Level.CONFIG]=window.console?console.info||console.log||h:h,i[Logger.Level.FINE]=window.console?console.debug||console.log||h:h,i[Logger.Level.FINER]=window.console?console.debug||console.log||h:h,i[Logger.Level.FINEST]=window.console?console.debug||console.log||h:h,i[Logger.Level.ALL]=window.console?console.log||h:h,g.config=function(a,b){this.log(Logger.Level.CONFIG,a,b)},g.entering=function(a,b,c){if(this.isLoggable(Logger.Level.FINER)){("chrome"==browser||"safari"==browser)&&(a=console);var d=i[Logger.Level.FINER];c?"object"==typeof d?d("ENTRY "+b,c):d.call(a,"ENTRY "+b,c):"object"==typeof d?d("ENTRY "+b):d.call(a,"ENTRY "+b)}},g.exiting=function(a,b,c){if(this.isLoggable(Logger.Level.FINER)){var d=i[Logger.Level.FINER];("chrome"==browser||"safari"==browser)&&(a=console),c?"object"==typeof d?d("RETURN "+b,c):d.call(a,"RETURN "+b,c):"object"==typeof d?d("RETURN "+b):d.call(a,"RETURN "+b)}},g.fine=function(a,b){this.log(Logger.Level.FINE,a,b)},g.finer=function(a,b){this.log(Logger.Level.FINER,a,b)},g.finest=function(a,b){this.log(Logger.Level.FINEST,a,b)},g.info=function(a,b){this.log(Logger.Level.INFO,a,b)},g.log=function(a,b,c){if(this.isLoggable(a)){var d=i[a];("chrome"==browser||"safari"==browser)&&(b=console),"object"==typeof d?d(c):d.call(b,c)}},g.severe=function(a,b){this.log(Logger.Level.SEVERE,a,b)},g.warning=function(a,b){this.log(Logger.Level.WARNING,a,b)}}();var ULOG=Logger.getLogger("com.kaazing.gateway.client.loader.Utils"),getMetaValue=function(a){ULOG.entering(this,"Utils.getMetaValue",a);for(var b=document.getElementsByTagName("meta"),c=0;c<b.length;c++)if(b[c].name===a){var d=b[c].content;return ULOG.exiting(this,"Utils.getMetaValue",d),d}ULOG.exiting(this,"Utils.getMetaValue")},arrayCopy=function(a){ULOG.entering(this,"Utils.arrayCopy",a);for(var b=[],c=0;c<a.length;c++)b.push(a[c]);return b},arrayFilter=function(a,b){ULOG.entering(this,"Utils.arrayFilter",{array:a,callback:b});for(var c=[],d=0;d<a.length;d++){var e=a[d];b(e)&&c.push(a[d])}return c},indexOf=function(a,b){ULOG.entering(this,"Utils.indexOf",{array:a,searchElement:b});for(var c=0;c<a.length;c++)if(a[c]==b)return ULOG.exiting(this,"Utils.indexOf",c),c;return ULOG.exiting(this,"Utils.indexOf",-1),-1},decodeByteString=function(a){ULOG.entering(this,"Utils.decodeByteString",a);for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));var d=new Kaazing.ByteBuffer(b),e=getStringUnterminated(d,Kaazing.Charset.UTF8);return ULOG.exiting(this,"Utils.decodeByteString",e),e},decodeArrayBuffer=function(a){ULOG.entering(this,"Utils.decodeArrayBuffer",a);for(var b=new Uint8Array(a),c=[],d=0;d<b.length;d++)c.push(b[d]);var b=new Kaazing.ByteBuffer(c),e=getStringUnterminated(b,Kaazing.Charset.UTF8);return ULOG.exiting(this,"Utils.decodeArrayBuffer",e),e},decodeArrayBuffer2ByteBuffer=function(a){ULOG.entering(this,"Utils.decodeArrayBuffer2ByteBuffer");for(var b=new Uint8Array(a),c=[],d=0;d<b.length;d++)c.push(b[d]);return ULOG.exiting(this,"Utils.decodeArrayBuffer2ByteBuffer"),new Kaazing.ByteBuffer(c)},ESCAPE_CHAR=String.fromCharCode(127),NULL=String.fromCharCode(0),LINEFEED="\n",encodeEscapedByteString=function(a){ULOG.entering(this,"Utils.encodeEscapedByte",a);for(var b=[];a.remaining();){var c=a.getUnsigned(),d=String.fromCharCode(c);switch(d){case ESCAPE_CHAR:b.push(ESCAPE_CHAR),b.push(ESCAPE_CHAR);break;case NULL:b.push(ESCAPE_CHAR),b.push("0");break;case LINEFEED:b.push(ESCAPE_CHAR),b.push("n");break;default:b.push(d)}}var e=b.join("");return ULOG.exiting(this,"Utils.encodeEscapedBytes",e),e},encodeByteString=function(a,b){if(ULOG.entering(this,"Utils.encodeByteString",{buf:a,requiresEscaping:b}),b)return encodeEscapedByteString(a);for(var c=a.array,d=0==a.position&&a.limit==c.length?c:a.getBytes(a.remaining()),e=!XMLHttpRequest.prototype.sendAsBinary,f=d.length-1;f>=0;f--){var g=d[f];0==g&&e?d[f]=256:0>g&&(d[f]=255&g)}var h=0,i=[];do{var j=Math.min(d.length-h,1e4);partOfBytes=d.slice(h,h+j),h+=j,i.push(String.fromCharCode.apply(null,partOfBytes))}while(h<d.length);var k=i.join("");if(d===c)for(var f=d.length-1;f>=0;f--){var g=d[f];256==g&&(d[f]=0)}return ULOG.exiting(this,"Utils.encodeByteString",k),k},getStringUnterminated=function(a,b){var c=a.position,d=a.limit;for(a.array;d>c;)c++;try{return a.limit=c,b.decode(a)}finally{c!=d&&(a.limit=d,a.position=c+1)}},browser=null;if("undefined"!=typeof ActiveXObject)browser=-1!=navigator.userAgent.indexOf("MSIE 10")?"chrome":"ie";else if(-1!=navigator.userAgent.indexOf("Trident/7")&&-1!=navigator.userAgent.indexOf("rv:11"))browser="chrome";else if("[object Opera]"==Object.prototype.toString.call(window.opera))browser="opera";else if(-1!=navigator.vendor.indexOf("Apple"))browser="safari",(-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("iPhone"))&&(browser.ios=!0);else if(-1!=navigator.vendor.indexOf("Google"))browser=-1!=navigator.userAgent.indexOf("Android")&&-1==navigator.userAgent.indexOf("Chrome")?"android":"chrome";else{if("Gecko"!=navigator.product||!window.find||navigator.savePreferences)throw new Error("couldn't detect browser");browser="firefox"}!function(a){if("undefined"==typeof a.ByteOrder){var b=function(){},c=b.prototype;c.toString=function(){throw new Error("Abstract")};var d=function(a){return 255&a},e=function(a){return 128&a?-256|a:a},f=function(a){return[a>>8&255,255&a]},g=function(a,b){return e(a)<<8|255&b},h=function(a,b){return(255&a)<<8|255&b},i=function(a,b,c){return(255&a)<<16|(255&b)<<8|255&c},j=function(a){return[a>>16&255,a>>8&255,255&a]},k=function(a,b,c){return(255&a)<<16|(255&b)<<8|255&c},l=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]},m=function(a,b,c,d){return e(a)<<24|(255&b)<<16|(255&c)<<8|255&d},n=function(a,b,c,d){var e=h(a,b),f=h(c,d);return 65536*e+f};b.BIG_ENDIAN=function(){var a=function(){};a.prototype=new b;var c=a.prototype;return c._toUnsignedByte=d,c._toByte=e,c._fromShort=f,c._toShort=g,c._toUnsignedShort=h,c._toUnsignedMediumInt=i,c._fromMediumInt=j,c._toMediumInt=k,c._fromInt=l,c._toInt=m,c._toUnsignedInt=n,c.toString=function(){return"<ByteOrder.BIG_ENDIAN>"},new a}(),b.LITTLE_ENDIAN=function(){var a=function(){};a.prototype=new b;var c=a.prototype;return c._toByte=e,c._toUnsignedByte=d,c._fromShort=function(a){return f(a).reverse()},c._toShort=function(a,b){return g(b,a)},c._toUnsignedShort=function(a,b){return h(b,a)},c._toUnsignedMediumInt=function(a,b,c){return i(c,b,a)},c._fromMediumInt=function(a){return j(a).reverse()},c._toMediumInt=function(a,b,c,d,e,f){return k(f,e,d,c,b,a)},c._fromInt=function(a){return l(a).reverse()},c._toInt=function(a,b,c,d){return m(d,c,b,a)},c._toUnsignedInt=function(a,b,c,d){return n(d,c,b,a)},c.toString=function(){return"<ByteOrder.LITTLE_ENDIAN>"},new a}(),a.ByteOrder=b}}(Kaazing),function(a){function b(a,b,c){for(var d=a.array,e=0;e<c.length;e++)d[e+b]=255&c[e]}function c(a,b){return a.autoExpand&&a.expand(b),a}function d(a,b){var c=a.position+b;if(c>a.limit)throw new Error("Buffer underflow");return a}function e(a,b,c){var d=b+c;if(0>b||d>a.limit)throw new Error("Index out of bounds");return a}function f(a,b,c){var d=b+c;if(0>b||d>a.limit)throw new Error("Index out of bounds");return a}if("undefined"==typeof a.ByteBuffer){var g=function(b){this.array=b||[],this._mark=-1,this.limit=this.capacity=this.array.length,this.order=a.ByteOrder.BIG_ENDIAN};g.allocate=function(a){var b=new g;return b.capacity=a,b.limit=a,b},g.wrap=function(a){return new g(a)};var h=g.prototype;h.autoExpand=!0,h.capacity=0,h.position=0,h.limit=0,h.order=a.ByteOrder.BIG_ENDIAN,h.array=[],h.mark=function(){return this._mark=this.position,this},h.reset=function(){var a=this._mark;if(0>a)throw new Error("Invalid mark");return this.position=a,this},h.compact=function(){return this.array.splice(0,this.position),this.limit-=this.position,this.position=0,this},h.duplicate=function(){var a=new g(this.array);return a.position=this.position,a.limit=this.limit,a.capacity=this.capacity,a},h.fill=function(a){for(c(this,a);a-->0;)this.put(0);return this},h.fillWith=function(a,b){for(c(this,b);b-->0;)this.put(a);return this},h.indexOf=function(a){for(var b=this.limit,c=this.array,d=this.position;b>d;d++)if(c[d]==a)return d;return-1},h.put=function(a){return c(this,1),this.array[this.position++]=255&a,this},h.putAt=function(a,b){return f(this,a,1),this.array[a]=255&b,this},h.putUnsigned=function(a){return c(this,1),this.array[this.position++]=255&a,this},h.putUnsignedAt=function(a,b){return f(this,a,1),this.array[a]=255&b,this},h.putShort=function(a){return c(this,2),b(this,this.position,this.order._fromShort(a)),this.position+=2,this},h.putShortAt=function(a,c){return f(this,a,2),b(this,a,this.order._fromShort(c)),this},h.putUnsignedShort=function(a){return c(this,2),b(this,this.position,this.order._fromShort(65535&a)),this.position+=2,this},h.putUnsignedShortAt=function(a,c){return f(this,a,2),b(this,a,this.order._fromShort(65535&c)),this},h.putMediumInt=function(a){return c(this,3),this.putMediumIntAt(this.position,a),this.position+=3,this},h.putMediumIntAt=function(a,b){return this.putBytesAt(a,this.order._fromMediumInt(b)),this},h.putInt=function(a){return c(this,4),b(this,this.position,this.order._fromInt(a)),this.position+=4,this},h.putIntAt=function(a,c){return f(this,a,4),b(this,a,this.order._fromInt(c)),this},h.putUnsignedInt=function(a){return c(this,4),this.putUnsignedIntAt(this.position,4294967295&a),this.position+=4,this},h.putUnsignedIntAt=function(a,b){return f(this,a,4),this.putIntAt(a,4294967295&b),this},h.putString=function(a,b){return b.encode(a,this),this},h.putPrefixedString=function(a,b,d){if("undefined"==typeof d||"undefined"==typeof d.encode)throw new Error("ByteBuffer.putPrefixedString: character set parameter missing");if(0===a)return this;c(this,a);var e=b.length;switch(a){case 1:this.put(e);break;case 2:this.putShort(e);break;case 4:this.putInt(e)}return d.encode(b,this),this},h.putBytes=function(a){return c(this,a.length),b(this,this.position,a),this.position+=a.length,this},h.putBytesAt=function(a,c){return f(this,a,c.length),b(this,a,c),this},h.putByteArray=function(a){c(this,a.byteLength);for(var b=new Uint8Array(a),d=0;d<b.byteLength;d++)this.putAt(this.position+d,255&b[d]);return this.position+=a.byteLength,this},h.putBuffer=function(a){var b=a.remaining();c(this,b);for(var d=a.array,e=a.position,f=this.position,g=0;b>g;g++)this.array[g+f]=d[g+e];return this.position+=b,this},h.putBufferAt=function(a,b){var d=b.remaining();c(this,d);for(var e=b.array,f=b.position,g=this.position,h=0;d>h;h++)this.array[h+g]=e[h+f];return this},h.get=function(){return d(this,1),this.order._toByte(this.array[this.position++])},h.getAt=function(a){return e(this,a,1),this.order._toByte(this.array[a])},h.getUnsigned=function(){d(this,1);var a=this.order._toUnsignedByte(this.array[this.position++]);return a},h.getUnsignedAt=function(a){return e(this,a,1),this.order._toUnsignedByte(this.array[a])},h.getBytes=function(a){d(this,a);for(var b=new Array,c=0;a>c;c++)b.push(this.order._toByte(this.array[c+this.position]));return this.position+=a,b},h.getBytesAt=function(a,b){e(this,a,b);for(var c=new Array,d=this.array,f=0;b>f;f++)c.push(d[f+a]);return c},h.getBlob=function(b){var c=this.array.slice(this.position,b);return this.position+=b,a.BlobUtils.fromNumberArray(c)},h.getBlobAt=function(b,c){var d=this.getBytesAt(b,c);return a.BlobUtils.fromNumberArray(d)},h.getArrayBuffer=function(a){var b=new Uint8Array(a);return b.set(this.array.slice(this.position,a)),this.position+=a,b.buffer},h.getShort=function(){d(this,2);var a=this.getShortAt(this.position);return this.position+=2,a},h.getShortAt=function(a){e(this,a,2);var b=this.array;return this.order._toShort(b[a++],b[a++])},h.getUnsignedShort=function(){d(this,2);var a=this.getUnsignedShortAt(this.position);return this.position+=2,a},h.getUnsignedShortAt=function(a){e(this,a,2);var b=this.array;return this.order._toUnsignedShort(b[a++],b[a++])},h.getUnsignedMediumInt=function(){var a=this.array;return this.order._toUnsignedMediumInt(a[this.position++],a[this.position++],a[this.position++])},h.getMediumInt=function(){var a=this.getMediumIntAt(this.position);return this.position+=3,a},h.getMediumIntAt=function(a){var b=this.array;return this.order._toMediumInt(b[a++],b[a++],b[a++])},h.getInt=function(){d(this,4);var a=this.getIntAt(this.position);return this.position+=4,a},h.getIntAt=function(a){e(this,a,4);var b=this.array;return this.order._toInt(b[a++],b[a++],b[a++],b[a++])},h.getUnsignedInt=function(){d(this,4);var a=this.getUnsignedIntAt(this.position);return this.position+=4,a},h.getUnsignedIntAt=function(a){e(this,a,4);var b=this.array;return this.order._toUnsignedInt(b[a++],b[a++],b[a++],b[a++])},h.getPrefixedString=function(a,b){var c=0;switch(a||2){case 1:c=this.getUnsigned();break;case 2:c=this.getUnsignedShort();break;case 4:c=this.getInt()}if(0===c)return"";var d=this.limit;try{return this.limit=this.position+c,b.decode(this)}finally{this.limit=d}},h.getString=function(a){try{return a.decode(this)}finally{this.position=this.limit}},h.slice=function(){return new g(this.array.slice(this.position,this.limit))},h.flip=function(){return this.limit=this.position,this.position=0,this._mark=-1,this},h.rewind=function(){return this.position=0,this._mark=-1,this},h.clear=function(){return this.position=0,this.limit=this.capacity,this._mark=-1,this},h.remaining=function(){return this.limit-this.position},h.hasRemaining=function(){return this.limit>this.position},h.skip=function(a){return this.position+=a,this},h.getHexDump=function(){var a=this.array,b=this.position,c=this.limit;if(b==c)return"empty";for(var d=[],e=b;c>e;e++){var f=(a[e]||0).toString(16);1==f.length&&(f="0"+f),d.push(f)}return d.join(" ")},h.toString=h.getHexDump,h.expand=function(a){return this.expandAt(this.position,a)},h.expandAt=function(a,b){var c=a+b;return c>this.capacity&&(this.capacity=c),c>this.limit&&(this.limit=c),this},a.ByteBuffer=g}}(Kaazing),function(a){if("undefined"==typeof a.Charset){var b=function(){},c=b.prototype;c.decode=function(){},c.encode=function(){},b.UTF8=function(){function a(){}function c(a){if(0===(128&a))return 1;if(0===(32&a))return 2;if(0===(16&a))return 3;if(0===(8&a))return 4;throw new Error("Invalid UTF-8 bytes")}a.prototype=new b;var d=a.prototype;return d.decode=function(a){for(var b,d,e,f,g=a.remaining(),h=1e4>g,i=[],j=a.array,k=a.position,l=k+g,m=k;l>m;m++){b=255&j[m];var n=c(b),o=l-m;if(n>o)break;var p=null;switch(n){case 1:p=b;break;case 2:m++,d=255&j[m],p=(31&b)<<6|63&d;break;case 3:m++,d=255&j[m],m++,e=255&j[m],p=(15&b)<<12|(63&d)<<6|63&e;break;case 4:m++,d=255&j[m],m++,e=255&j[m],m++,f=255&j[m],p=(7&b)<<18|(63&d)<<12|(63&e)<<6|63&f}i.push(h?p:String.fromCharCode(p))}return h?String.fromCharCode.apply(null,i):i.join("")},d.encode=function(a,b){for(var c=b.position,d=c,e=b.array,f=0;f<a.length;f++){var g=a.charCodeAt(f);if(128>g)e[c++]=g;else if(2048>g)e[c++]=g>>6|192,e[c++]=63&g|128;else if(65536>g)e[c++]=g>>12|224,e[c++]=g>>6&63|128,e[c++]=63&g|128;else{if(!(1114112>g))throw new Error("Invalid UTF-8 string");e[c++]=g>>18|240,e[c++]=g>>12&63|128,e[c++]=g>>6&63|128,e[c++]=63&g|128}}b.position=c,b.expandAt(c,c-d)},d.encodeAsByteArray=function(a){for(var b=new Array,c=0;c<a.length;c++){var d=a.charCodeAt(c);if(128>d)b.push(d);else if(2048>d)b.push(d>>6|192),b.push(63&d|128);else if(65536>d)b.push(d>>12|224),b.push(d>>6&63|128),b.push(63&d|128);else{if(!(1114112>d))throw new Error("Invalid UTF-8 string");b.push(d>>18|240),b.push(d>>12&63|128),b.push(d>>6&63|128),b.push(63&d|128)}}return b},d.encodeByteArray=function(a){for(var b=a.length,c=[],d=0;b>d;d++){var e=a[d];if(128>e)c.push(e);else if(2048>e)c.push(e>>6|192),c.push(63&e|128);else if(65536>e)c.push(e>>12|224),c.push(e>>6&63|128),c.push(63&e|128);else{if(!(1114112>e))throw new Error("Invalid UTF-8 string");c.push(e>>18|240),c.push(e>>12&63|128),c.push(e>>6&63|128),c.push(63&e|128)}}return String.fromCharCode.apply(null,c)},d.encodeArrayBuffer=function(a){for(var b=new Uint8Array(a),c=b.length,d=[],e=0;c>e;e++){var f=b[e];if(128>f)d.push(f);else if(2048>f)d.push(f>>6|192),d.push(63&f|128);else if(65536>f)d.push(f>>12|224),d.push(f>>6&63|128),d.push(63&f|128);else{if(!(1114112>f))throw new Error("Invalid UTF-8 string");d.push(f>>18|240),d.push(f>>12&63|128),d.push(f>>6&63|128),d.push(63&f|128)}}return String.fromCharCode.apply(null,d)},d.toByteArray=function(a){for(var b,d,e,f,g=[],h=a.length,i=0;h>i;i++){b=255&a.charCodeAt(i);var j=c(b),k=null;if(j+i>h)break;switch(j){case 1:k=b;break;case 2:i++,d=255&a.charCodeAt(i),k=(31&b)<<6|63&d;break;case 3:i++,d=255&a.charCodeAt(i),i++,e=255&a.charCodeAt(i),k=(15&b)<<12|(63&d)<<6|63&e;break;case 4:i++,d=255&a.charCodeAt(i),i++,e=255&a.charCodeAt(i),i++,f=255&a.charCodeAt(i),k=(7&b)<<18|(63&d)<<12|(63&e)<<6|63&f}g.push(255&k)}return g},new a}(),a.Charset=b}}(Kaazing),function(){var a=URI.prototype;a.toString=function(){var a=[],b=this.scheme;if(void 0!==b){a.push(b),a.push("://"),a.push(this.host);var c=this.port;void 0!==c&&(a.push(":"),a.push(c.toString()))}return void 0!==this.path&&a.push(this.path),void 0!==this.query&&(a.push("?"),a.push(this.query)),void 0!==this.fragment&&(a.push("#"),a.push(this.fragment)),a.join("")};URI.replaceProtocol=function(a,b){var c=a.indexOf("://");return c>0?b+a.substr(c):""}}();var LOADER_BASE_NAME="AmqpClient";Kaazing.AMQP=Kaazing.namespace("Kaazing.AMQP");var $rootModule=Kaazing,$module=$rootModule.AMQP,$gatewayModule=$rootModule.Gateway;"function"==typeof define&&define.amd&&define([],function(){return $module});var EventDispatcher=function(){};!function(a){var b=EventDispatcher.prototype;b._initEventDispatcher=function(){this._eventListeners={}},b.addEventListener=function(a,b){var c=this._eventListeners[a];c?c.push(b):this._eventListeners[a]=[b]},b.removeEventListener=function(a,b){var c=this._eventListeners[a];if(c){for(var d=[],e=0;e<c.length;e++)c[e]!==b&&d.push(c[e]);this._eventListeners[a]=new Listeners}},b.hasEventListener=function(a){var b=this._eventListeners[a];return Boolean(b)},b.dispatchEvent=function(a){var b=this._eventListeners[a.type];if(b)for(var c=0;c<b.length;c++)b[c](a);this["on"+a.type]&&this["on"+a.type](a)},a.EventDispatcher=EventDispatcher}(Kaazing.AMQP);var AmqpClient=function(a){if(!(a&&a instanceof AmqpClientFactory))throw new Error("AmqpClient: Required parameter 'factory' must be an instance of AmqpClientFactory");this._amqpClientFactory=a,this._options={},this._readyState=0,this._init()};!function(){function a(a,b,c,d){var e={url:b,virtualHost:c,credentials:d};a._stateMachine.enterState("handshaking","",e)}var b=function(a){this.context=a,this.states={}};!function(){var a=b.prototype,c=function(){};a.enterState=function(a,b,c){this.currentState&&this.currentState.exitBehavior(this.context,b,c,a);var d=this.states[a];this.currentState=d;try{d.entryBehavior(this.context,b,c,a)}catch(e){var f=new Error("Could not call behavior for state "+d.stateName+"\n\n"+e.message);throw f.innerException=e,f}},a.addState=function(a,b,d,e){var f={};f.stateName=a,f.entryBehavior=d||c,f.exitBehavior=e||c,this.states[a]=f,f.rules={};for(var g=b||[],h=0;h<g.length;h++)for(var i=g[h],j=0;j<i.inputs.length;j++){var k=i.inputs[j];f.rules[k]=i.targetState}},a.feedInput=function(a,b){var c=this.currentState;if(c.rules[a]){var d=this,e=function(){d.enterState(c.rules[a],a,b)};return e(),!0}return!1}}();var c=function(){};!function(){c.prototype=new EventDispatcher;var a=c.prototype,d=function(){},e=function(a){throw a};a._stateMachine=null,a.onerror=function(){},a._actions=[],a._processActions=function(){if(this._actions.length){var a=this._actions[0],b=this._stateMachine.feedInput(a.actionName+"Action",a);if(b){var c=this;setTimeout(function(){try{a.func.apply(c,a.args)}catch(b){a.error(b)}},0),this._actions.shift()}}},a._enqueueAction=function(a,b,c,f,g){var h={};h.actionName=a||"",h.func=b||d,h.args=c||null,h.continuation=f||d,h.error=g||e,this._actions.push(h);var i=this,b=function(){i._processActions()};setTimeout(b,0)},a._initAsyncClient=function(){this._initEventDispatcher(),this._stateMachine=new b(this),this._actions=[],this._buffer=null,this._socket=null},a._send=null,a._readHandler=null}();var d={};d.FRAME_METHOD={value:1,message:""},d.FRAME_HEADER={value:2,message:""},d.FRAME_BODY={value:3,message:""},d.FRAME_HEARTBEAT={value:8,message:""},d.FRAME_MIN_SIZE={value:4096,message:""},d.FRAME_END={value:206,message:""},d.REPLY_SUCCESS={value:200,message:"Indicates that the method completed successfully. This reply code is reserved for future use - the current protocol design does not use positive confirmation and reply codes are sent only in case of an error."},d.CONTENT_TOO_LARGE={value:311,message:"The client attempted to transfer content larger than the server could accept at the present time. The client may retry at a later time."},d.NO_CONSUMERS={value:313,message:"When the exchange cannot deliver to a consumer when the immediate flag is set. As a result of pending data on the queue or the absence of any consumers of the queue."},d.CONNECTION_FORCED={value:320,message:"An operator intervened to close the connection for some reason. The client may retry at some later date."},d.INVALID_PATH={value:402,message:"The client tried to work with an unknown virtual host."},d.ACCESS_REFUSED={value:403,message:"The client attempted to work with a server entity to which it has no access due to security settings."},d.NOT_FOUND={value:404,message:"The client attempted to work with a server entity that does not exist."},d.RESOURCE_LOCKED={value:405,message:"The client attempted to work with a server entity to which it has no access because another client is working with it."},d.PRECONDITION_FAILED={value:406,message:"The client requested a method that was not allowed because some precondition failed."},d.FRAME_ERROR={value:501,message:"The sender sent a malformed frame that the recipient could not decode. This strongly implies a programming error in the sending peer."},d.SYNTAX_ERROR={value:502,message:"The sender sent a frame that contained illegal values for one or more fields. This strongly implies a programming error in the sending peer."},d.COMMAND_INVALID={value:503,message:"The client sent an invalid sequence of frames, attempting to perform an operation that was considered invalid by the server. This usually implies a programming error in the client."},d.CHANNEL_ERROR={value:504,message:"The client attempted to work with a channel that had not been correctly opened. This most likely indicates a fault in the client layer."},d.UNEXPECTED_FRAME={value:505,message:"The peer sent a frame that was not expected, usually in the context of a content header and body.  This strongly indicates a fault in the peer's content processing."},d.RESOURCE_ERROR={value:506,message:"The server could not complete the method because it lacked sufficient resources. This may be due to the client creating too many of some type of entity."},d.NOT_ALLOWED={value:530,message:"The client tried to work with some entity in a manner that is prohibited by the server, due to security settings or by some other criteria."},d.NOT_IMPLEMENTED={value:540,message:"The client tried to use functionality that is not implemented in the server."},d.INTERNAL_ERROR={value:541,message:"The server could not complete the method because of an internal error. The server may require intervention by an operator in order to resume normal operations."};var e={ClassId:{type:"short",asserts:[]},ConsumerTag:{type:"shortstr",asserts:[]},DeliveryTag:{type:"longlong",asserts:[]},ExchangeName:{type:"shortstr",asserts:[]},MethodId:{type:"short",asserts:[]},NoAck:{type:"bit",asserts:[]},NoLocal:{type:"bit",asserts:[]},NoWait:{type:"bit",asserts:[]},Path:{type:"shortstr",asserts:[]},PeerProperties:{type:"table",asserts:[]},QueueName:{type:"shortstr",asserts:[]},Redelivered:{type:"bit",asserts:[]},MessageCount:{type:"long",asserts:[]},ReplyCode:{type:"short",asserts:[]},ReplyText:{type:"shortstr",asserts:[]},Bit:{type:"bit",asserts:[]},Octet:{type:"octet",asserts:[]},Short:{type:"short",asserts:[]},Long:{type:"long",asserts:[]},Longlong:{type:"longlong",asserts:[]},Shortstr:{type:"shortstr",asserts:[]},Longstr:{type:"longstr",asserts:[]},Timestamp:{type:"timestamp",asserts:[]},Table:{type:"table",asserts:[]}},f={};f.Connection={},f.Connection.startConnection={},f.Connection.startConnection.allParameters=[{name:"versionMajor",type:"Octet"},{name:"versionMinor",type:"Octet"},{name:"serverProperties",type:"PeerProperties"},{name:"mechanisms",type:"Longstr"},{name:"locales",type:"Longstr"}],f.Connection.startConnection.returnType="StartOkConnection",f.Connection.startConnection.index=10,f.Connection.startConnection.classIndex=10,f.Connection.startConnection.synchronous=!0,f.Connection.startConnection.hasContent=!1,f.Connection.startOkConnection={},f.Connection.startOkConnection.allParameters=[{name:"clientProperties",type:"PeerProperties"},{name:"mechanism",type:"Shortstr"},{name:"response",type:"Longstr"},{name:"locale",type:"Shortstr"}],f.Connection.startOkConnection.returnType="voidConnection",f.Connection.startOkConnection.index=11,f.Connection.startOkConnection.classIndex=10,f.Connection.startOkConnection.synchronous=!0,f.Connection.startOkConnection.hasContent=!1,f.Connection.secureConnection={},f.Connection.secureConnection.allParameters=[{name:"challenge",type:"Longstr"}],f.Connection.secureConnection.returnType="SecureOkConnection",f.Connection.secureConnection.index=20,f.Connection.secureConnection.classIndex=10,f.Connection.secureConnection.synchronous=!0,f.Connection.secureConnection.hasContent=!1,f.Connection.secureOkConnection={},f.Connection.secureOkConnection.allParameters=[{name:"response",type:"Longstr"}],f.Connection.secureOkConnection.returnType="voidConnection",f.Connection.secureOkConnection.index=21,f.Connection.secureOkConnection.classIndex=10,f.Connection.secureOkConnection.synchronous=!0,f.Connection.secureOkConnection.hasContent=!1,f.Connection.tuneConnection={},f.Connection.tuneConnection.allParameters=[{name:"channelMax",type:"Short"},{name:"frameMax",type:"Long"},{name:"heartbeat",type:"Short"}],f.Connection.tuneConnection.returnType="TuneOkConnection",f.Connection.tuneConnection.index=30,f.Connection.tuneConnection.classIndex=10,f.Connection.tuneConnection.synchronous=!0,f.Connection.tuneConnection.hasContent=!1,f.Connection.tuneOkConnection={},f.Connection.tuneOkConnection.allParameters=[{name:"channelMax",type:"Short"},{name:"frameMax",type:"Long"},{name:"heartbeat",type:"Short"}],f.Connection.tuneOkConnection.returnType="voidConnection",f.Connection.tuneOkConnection.index=31,f.Connection.tuneOkConnection.classIndex=10,f.Connection.tuneOkConnection.synchronous=!0,f.Connection.tuneOkConnection.hasContent=!1,f.Connection.openConnection={},f.Connection.openConnection.allParameters=[{name:"virtualHost",type:"Path"},{name:"reserved1",type:"Shortstr"},{name:"reserved2",type:"Bit"}],f.Connection.openConnection.returnType="OpenOkConnection",f.Connection.openConnection.index=40,f.Connection.openConnection.classIndex=10,f.Connection.openConnection.synchronous=!0,f.Connection.openConnection.hasContent=!1,f.Connection.openOkConnection={},f.Connection.openOkConnection.allParameters=[{name:"reserved1",type:"Shortstr"}],f.Connection.openOkConnection.returnType="voidConnection",f.Connection.openOkConnection.index=41,f.Connection.openOkConnection.classIndex=10,f.Connection.openOkConnection.synchronous=!0,f.Connection.openOkConnection.hasContent=!1,f.Connection.closeConnection={},f.Connection.closeConnection.allParameters=[{name:"replyCode",type:"ReplyCode"},{name:"replyText",type:"ReplyText"},{name:"classId",type:"ClassId"},{name:"methodId",type:"MethodId"}],f.Connection.closeConnection.returnType="CloseOkConnection",f.Connection.closeConnection.index=50,f.Connection.closeConnection.classIndex=10,f.Connection.closeConnection.synchronous=!0,f.Connection.closeConnection.hasContent=!1,f.Connection.closeOkConnection={},f.Connection.closeOkConnection.allParameters=[],f.Connection.closeOkConnection.returnType="voidConnection",f.Connection.closeOkConnection.index=51,f.Connection.closeOkConnection.classIndex=10,f.Connection.closeOkConnection.synchronous=!0,f.Connection.closeOkConnection.hasContent=!1,f.Connection.methodLookup={10:"startConnection",11:"startOkConnection",20:"secureConnection",21:"secureOkConnection",30:"tuneConnection",31:"tuneOkConnection",40:"openConnection",41:"openOkConnection",50:"closeConnection",51:"closeOkConnection"},f.Connection.className="Connection",f.Channel={},f.Channel.openChannel={},f.Channel.openChannel.allParameters=[{name:"reserved1",type:"Shortstr"}],f.Channel.openChannel.returnType="OpenOkChannel",f.Channel.openChannel.index=10,f.Channel.openChannel.classIndex=20,f.Channel.openChannel.synchronous=!0,f.Channel.openChannel.hasContent=!1,f.Channel.openOkChannel={},f.Channel.openOkChannel.allParameters=[{name:"reserved1",type:"Longstr"}],f.Channel.openOkChannel.returnType="voidChannel",f.Channel.openOkChannel.index=11,f.Channel.openOkChannel.classIndex=20,f.Channel.openOkChannel.synchronous=!0,f.Channel.openOkChannel.hasContent=!1,f.Channel.flowChannel={},f.Channel.flowChannel.allParameters=[{name:"active",type:"Bit"}],f.Channel.flowChannel.returnType="FlowOkChannel",f.Channel.flowChannel.index=20,f.Channel.flowChannel.classIndex=20,f.Channel.flowChannel.synchronous=!0,f.Channel.flowChannel.hasContent=!1,f.Channel.flowOkChannel={},f.Channel.flowOkChannel.allParameters=[{name:"active",type:"Bit"}],f.Channel.flowOkChannel.returnType="voidChannel",f.Channel.flowOkChannel.index=21,f.Channel.flowOkChannel.classIndex=20,f.Channel.flowOkChannel.synchronous=!1,f.Channel.flowOkChannel.hasContent=!1,f.Channel.closeChannel={},f.Channel.closeChannel.allParameters=[{name:"replyCode",type:"ReplyCode"},{name:"replyText",type:"ReplyText"},{name:"classId",type:"ClassId"},{name:"methodId",type:"MethodId"}],f.Channel.closeChannel.returnType="CloseOkChannel",f.Channel.closeChannel.index=40,f.Channel.closeChannel.classIndex=20,f.Channel.closeChannel.synchronous=!0,f.Channel.closeChannel.hasContent=!1,f.Channel.closeOkChannel={},f.Channel.closeOkChannel.allParameters=[],f.Channel.closeOkChannel.returnType="voidChannel",f.Channel.closeOkChannel.index=41,f.Channel.closeOkChannel.classIndex=20,f.Channel.closeOkChannel.synchronous=!0,f.Channel.closeOkChannel.hasContent=!1,f.Channel.methodLookup={10:"openChannel",11:"openOkChannel",20:"flowChannel",21:"flowOkChannel",40:"closeChannel",41:"closeOkChannel"},f.Channel.className="Channel",f.Exchange={},f.Exchange.declareExchange={},f.Exchange.declareExchange.allParameters=[{name:"reserved1",type:"Short"},{name:"exchange",type:"ExchangeName"},{name:"type",type:"Shortstr"},{name:"passive",type:"Bit"},{name:"durable",type:"Bit"},{name:"reserved2",type:"Bit"},{name:"reserved3",type:"Bit"},{name:"noWait",type:"NoWait"},{name:"arguments",type:"Table"}],f.Exchange.declareExchange.returnType="DeclareOkExchange",f.Exchange.declareExchange.index=10,f.Exchange.declareExchange.classIndex=40,f.Exchange.declareExchange.synchronous=!0,f.Exchange.declareExchange.hasContent=!1,f.Exchange.declareOkExchange={},f.Exchange.declareOkExchange.allParameters=[],f.Exchange.declareOkExchange.returnType="voidExchange",f.Exchange.declareOkExchange.index=11,f.Exchange.declareOkExchange.classIndex=40,f.Exchange.declareOkExchange.synchronous=!0,f.Exchange.declareOkExchange.hasContent=!1,f.Exchange.deleteExchange={},f.Exchange.deleteExchange.allParameters=[{name:"reserved1",type:"Short"},{name:"exchange",type:"ExchangeName"},{name:"ifUnused",type:"Bit"},{name:"noWait",type:"NoWait"}],f.Exchange.deleteExchange.returnType="DeleteOkExchange",f.Exchange.deleteExchange.index=20,f.Exchange.deleteExchange.classIndex=40,f.Exchange.deleteExchange.synchronous=!0,f.Exchange.deleteExchange.hasContent=!1,f.Exchange.deleteOkExchange={},f.Exchange.deleteOkExchange.allParameters=[],f.Exchange.deleteOkExchange.returnType="voidExchange",f.Exchange.deleteOkExchange.index=21,f.Exchange.deleteOkExchange.classIndex=40,f.Exchange.deleteOkExchange.synchronous=!0,f.Exchange.deleteOkExchange.hasContent=!1,f.Exchange.methodLookup={10:"declareExchange",11:"declareOkExchange",20:"deleteExchange",21:"deleteOkExchange"},f.Exchange.className="Exchange",f.Queue={},f.Queue.declareQueue={},f.Queue.declareQueue.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"passive",type:"Bit"},{name:"durable",type:"Bit"},{name:"exclusive",type:"Bit"},{name:"autoDelete",type:"Bit"},{name:"noWait",type:"NoWait"},{name:"arguments",type:"Table"}],f.Queue.declareQueue.returnType="DeclareOkQueue",f.Queue.declareQueue.index=10,f.Queue.declareQueue.classIndex=50,f.Queue.declareQueue.synchronous=!0,f.Queue.declareQueue.hasContent=!1,f.Queue.declareOkQueue={},f.Queue.declareOkQueue.allParameters=[{name:"queue",type:"QueueName"},{name:"messageCount",type:"MessageCount"},{name:"consumerCount",type:"Long"}],f.Queue.declareOkQueue.returnType="voidQueue",f.Queue.declareOkQueue.index=11,f.Queue.declareOkQueue.classIndex=50,f.Queue.declareOkQueue.synchronous=!0,f.Queue.declareOkQueue.hasContent=!1,f.Queue.bindQueue={},f.Queue.bindQueue.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"},{name:"noWait",type:"NoWait"},{name:"arguments",type:"Table"}],f.Queue.bindQueue.returnType="BindOkQueue",f.Queue.bindQueue.index=20,f.Queue.bindQueue.classIndex=50,f.Queue.bindQueue.synchronous=!0,f.Queue.bindQueue.hasContent=!1,f.Queue.bindOkQueue={},f.Queue.bindOkQueue.allParameters=[],f.Queue.bindOkQueue.returnType="voidQueue",f.Queue.bindOkQueue.index=21,f.Queue.bindOkQueue.classIndex=50,f.Queue.bindOkQueue.synchronous=!0,f.Queue.bindOkQueue.hasContent=!1,f.Queue.unbindQueue={},f.Queue.unbindQueue.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"},{name:"arguments",type:"Table"}],f.Queue.unbindQueue.returnType="UnbindOkQueue",f.Queue.unbindQueue.index=50,f.Queue.unbindQueue.classIndex=50,f.Queue.unbindQueue.synchronous=!0,f.Queue.unbindQueue.hasContent=!1,f.Queue.unbindOkQueue={},f.Queue.unbindOkQueue.allParameters=[],f.Queue.unbindOkQueue.returnType="voidQueue",f.Queue.unbindOkQueue.index=51,f.Queue.unbindOkQueue.classIndex=50,f.Queue.unbindOkQueue.synchronous=!0,f.Queue.unbindOkQueue.hasContent=!1,f.Queue.purgeQueue={},f.Queue.purgeQueue.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"noWait",type:"NoWait"}],f.Queue.purgeQueue.returnType="PurgeOkQueue",f.Queue.purgeQueue.index=30,f.Queue.purgeQueue.classIndex=50,f.Queue.purgeQueue.synchronous=!0,f.Queue.purgeQueue.hasContent=!1,f.Queue.purgeOkQueue={},f.Queue.purgeOkQueue.allParameters=[{name:"messageCount",type:"MessageCount"}],f.Queue.purgeOkQueue.returnType="voidQueue",f.Queue.purgeOkQueue.index=31,f.Queue.purgeOkQueue.classIndex=50,f.Queue.purgeOkQueue.synchronous=!0,f.Queue.purgeOkQueue.hasContent=!1,f.Queue.deleteQueue={},f.Queue.deleteQueue.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"ifUnused",type:"Bit"},{name:"ifEmpty",type:"Bit"},{name:"noWait",type:"NoWait"}],f.Queue.deleteQueue.returnType="DeleteOkQueue",f.Queue.deleteQueue.index=40,f.Queue.deleteQueue.classIndex=50,f.Queue.deleteQueue.synchronous=!0,f.Queue.deleteQueue.hasContent=!1,f.Queue.deleteOkQueue={},f.Queue.deleteOkQueue.allParameters=[{name:"messageCount",type:"MessageCount"}],f.Queue.deleteOkQueue.returnType="voidQueue",f.Queue.deleteOkQueue.index=41,f.Queue.deleteOkQueue.classIndex=50,f.Queue.deleteOkQueue.synchronous=!0,f.Queue.deleteOkQueue.hasContent=!1,f.Queue.methodLookup={10:"declareQueue",11:"declareOkQueue",20:"bindQueue",21:"bindOkQueue",50:"unbindQueue",51:"unbindOkQueue",30:"purgeQueue",31:"purgeOkQueue",40:"deleteQueue",41:"deleteOkQueue"},f.Queue.className="Queue",f.Basic={},f.Basic.qosBasic={},f.Basic.qosBasic.allParameters=[{name:"prefetchSize",type:"Long"},{name:"prefetchCount",type:"Short"},{name:"global",type:"Bit"}],f.Basic.qosBasic.returnType="QosOkBasic",f.Basic.qosBasic.index=10,f.Basic.qosBasic.classIndex=60,f.Basic.qosBasic.synchronous=!0,f.Basic.qosBasic.hasContent=!1,f.Basic.qosOkBasic={},f.Basic.qosOkBasic.allParameters=[],f.Basic.qosOkBasic.returnType="voidBasic",f.Basic.qosOkBasic.index=11,f.Basic.qosOkBasic.classIndex=60,f.Basic.qosOkBasic.synchronous=!0,f.Basic.qosOkBasic.hasContent=!1,f.Basic.consumeBasic={},f.Basic.consumeBasic.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"consumerTag",type:"ConsumerTag"},{name:"noLocal",type:"NoLocal"},{name:"noAck",type:"NoAck"},{name:"exclusive",type:"Bit"},{name:"noWait",type:"NoWait"},{name:"arguments",type:"Table"}],f.Basic.consumeBasic.returnType="ConsumeOkBasic",f.Basic.consumeBasic.index=20,f.Basic.consumeBasic.classIndex=60,f.Basic.consumeBasic.synchronous=!0,f.Basic.consumeBasic.hasContent=!1,f.Basic.consumeOkBasic={},f.Basic.consumeOkBasic.allParameters=[{name:"consumerTag",type:"ConsumerTag"}],f.Basic.consumeOkBasic.returnType="voidBasic",f.Basic.consumeOkBasic.index=21,f.Basic.consumeOkBasic.classIndex=60,f.Basic.consumeOkBasic.synchronous=!0,f.Basic.consumeOkBasic.hasContent=!1,f.Basic.cancelBasic={},f.Basic.cancelBasic.allParameters=[{name:"consumerTag",type:"ConsumerTag"},{name:"noWait",type:"NoWait"}],f.Basic.cancelBasic.returnType="CancelOkBasic",f.Basic.cancelBasic.index=30,f.Basic.cancelBasic.classIndex=60,f.Basic.cancelBasic.synchronous=!0,f.Basic.cancelBasic.hasContent=!1,f.Basic.cancelOkBasic={},f.Basic.cancelOkBasic.allParameters=[{name:"consumerTag",type:"ConsumerTag"}],f.Basic.cancelOkBasic.returnType="voidBasic",f.Basic.cancelOkBasic.index=31,f.Basic.cancelOkBasic.classIndex=60,f.Basic.cancelOkBasic.synchronous=!0,f.Basic.cancelOkBasic.hasContent=!1,f.Basic.publishBasic={},f.Basic.publishBasic.allParameters=[{name:"reserved1",type:"Short"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"},{name:"mandatory",type:"Bit"},{name:"immediate",type:"Bit"}],f.Basic.publishBasic.returnType="voidBasic",f.Basic.publishBasic.index=40,f.Basic.publishBasic.classIndex=60,f.Basic.publishBasic.synchronous=!1,f.Basic.publishBasic.hasContent=!0,f.Basic.returnBasic={},f.Basic.returnBasic.allParameters=[{name:"replyCode",type:"ReplyCode"},{name:"replyText",type:"ReplyText"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"}],f.Basic.returnBasic.returnType="voidBasic",f.Basic.returnBasic.index=50,f.Basic.returnBasic.classIndex=60,f.Basic.returnBasic.synchronous=!1,f.Basic.returnBasic.hasContent=!0,f.Basic.deliverBasic={},f.Basic.deliverBasic.allParameters=[{name:"consumerTag",type:"ConsumerTag"},{name:"deliveryTag",type:"DeliveryTag"},{name:"redelivered",type:"Redelivered"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"}],f.Basic.deliverBasic.returnType="voidBasic",f.Basic.deliverBasic.index=60,f.Basic.deliverBasic.classIndex=60,f.Basic.deliverBasic.synchronous=!1,f.Basic.deliverBasic.hasContent=!0,f.Basic.getBasic={},f.Basic.getBasic.allParameters=[{name:"reserved1",type:"Short"},{name:"queue",type:"QueueName"},{name:"noAck",type:"NoAck"}],f.Basic.getBasic.returnType="GetOkBasic",f.Basic.getBasic.index=70,f.Basic.getBasic.classIndex=60,f.Basic.getBasic.synchronous=!0,f.Basic.getBasic.hasContent=!1,f.Basic.getOkBasic={},f.Basic.getOkBasic.allParameters=[{name:"deliveryTag",type:"DeliveryTag"},{name:"redelivered",type:"Redelivered"},{name:"exchange",type:"ExchangeName"},{name:"routingKey",type:"Shortstr"},{name:"messageCount",type:"MessageCount"}],f.Basic.getOkBasic.returnType="voidBasic",f.Basic.getOkBasic.index=71,f.Basic.getOkBasic.classIndex=60,f.Basic.getOkBasic.synchronous=!0,f.Basic.getOkBasic.hasContent=!0,f.Basic.getEmptyBasic={},f.Basic.getEmptyBasic.allParameters=[{name:"reserved1",type:"Shortstr"}],f.Basic.getEmptyBasic.returnType="voidBasic",f.Basic.getEmptyBasic.index=72,f.Basic.getEmptyBasic.classIndex=60,f.Basic.getEmptyBasic.synchronous=!0,f.Basic.getEmptyBasic.hasContent=!1,f.Basic.ackBasic={},f.Basic.ackBasic.allParameters=[{name:"deliveryTag",type:"DeliveryTag"},{name:"multiple",type:"Bit"}],f.Basic.ackBasic.returnType="voidBasic",f.Basic.ackBasic.index=80,f.Basic.ackBasic.classIndex=60,f.Basic.ackBasic.synchronous=!1,f.Basic.ackBasic.hasContent=!1,f.Basic.rejectBasic={},f.Basic.rejectBasic.allParameters=[{name:"deliveryTag",type:"DeliveryTag"},{name:"requeue",type:"Bit"}],f.Basic.rejectBasic.returnType="voidBasic",f.Basic.rejectBasic.index=90,f.Basic.rejectBasic.classIndex=60,f.Basic.rejectBasic.synchronous=!1,f.Basic.rejectBasic.hasContent=!1,f.Basic.recoverAsyncBasic={},f.Basic.recoverAsyncBasic.allParameters=[{name:"requeue",type:"Bit"}],f.Basic.recoverAsyncBasic.returnType="voidBasic",f.Basic.recoverAsyncBasic.index=100,f.Basic.recoverAsyncBasic.classIndex=60,f.Basic.recoverAsyncBasic.synchronous=!1,f.Basic.recoverAsyncBasic.hasContent=!1,f.Basic.recoverBasic={},f.Basic.recoverBasic.allParameters=[{name:"requeue",type:"Bit"}],f.Basic.recoverBasic.returnType="voidBasic",f.Basic.recoverBasic.index=110,f.Basic.recoverBasic.classIndex=60,f.Basic.recoverBasic.synchronous=!1,f.Basic.recoverBasic.hasContent=!1,f.Basic.recoverOkBasic={},f.Basic.recoverOkBasic.allParameters=[],f.Basic.recoverOkBasic.returnType="voidBasic",f.Basic.recoverOkBasic.index=111,f.Basic.recoverOkBasic.classIndex=60,f.Basic.recoverOkBasic.synchronous=!0,f.Basic.recoverOkBasic.hasContent=!1,f.Basic.methodLookup={10:"qosBasic",11:"qosOkBasic",20:"consumeBasic",21:"consumeOkBasic",30:"cancelBasic",31:"cancelOkBasic",40:"publishBasic",50:"returnBasic",60:"deliverBasic",70:"getBasic",71:"getOkBasic",72:"getEmptyBasic",80:"ackBasic",90:"rejectBasic",100:"recoverAsyncBasic",110:"recoverBasic",111:"recoverOkBasic"},f.Basic.className="Basic",f.Tx={},f.Tx.selectTx={},f.Tx.selectTx.allParameters=[],f.Tx.selectTx.returnType="SelectOkTx",f.Tx.selectTx.index=10,f.Tx.selectTx.classIndex=90,f.Tx.selectTx.synchronous=!0,f.Tx.selectTx.hasContent=!1,f.Tx.selectOkTx={},f.Tx.selectOkTx.allParameters=[],f.Tx.selectOkTx.returnType="voidTx",f.Tx.selectOkTx.index=11,f.Tx.selectOkTx.classIndex=90,f.Tx.selectOkTx.synchronous=!0,f.Tx.selectOkTx.hasContent=!1,f.Tx.commitTx={},f.Tx.commitTx.allParameters=[],f.Tx.commitTx.returnType="CommitOkTx",f.Tx.commitTx.index=20,f.Tx.commitTx.classIndex=90,f.Tx.commitTx.synchronous=!0,f.Tx.commitTx.hasContent=!1,f.Tx.commitOkTx={},f.Tx.commitOkTx.allParameters=[],f.Tx.commitOkTx.returnType="voidTx",f.Tx.commitOkTx.index=21,f.Tx.commitOkTx.classIndex=90,f.Tx.commitOkTx.synchronous=!0,f.Tx.commitOkTx.hasContent=!1,f.Tx.rollbackTx={},f.Tx.rollbackTx.allParameters=[],f.Tx.rollbackTx.returnType="RollbackOkTx",f.Tx.rollbackTx.index=30,f.Tx.rollbackTx.classIndex=90,f.Tx.rollbackTx.synchronous=!0,f.Tx.rollbackTx.hasContent=!1,f.Tx.rollbackOkTx={},f.Tx.rollbackOkTx.allParameters=[],f.Tx.rollbackOkTx.returnType="voidTx",f.Tx.rollbackOkTx.index=31,f.Tx.rollbackOkTx.classIndex=90,f.Tx.rollbackOkTx.synchronous=!0,f.Tx.rollbackOkTx.hasContent=!1,f.Tx.methodLookup={10:"selectTx",11:"selectOkTx",20:"commitTx",21:"commitOkTx",30:"rollbackTx",31:"rollbackOkTx"},f.Tx.className="Tx";
var g={10:f.Connection,20:f.Channel,40:f.Exchange,50:f.Queue,60:f.Basic,90:f.Tx},h={startConnection:f.Connection.startConnection,startOkConnection:f.Connection.startOkConnection,secureConnection:f.Connection.secureConnection,secureOkConnection:f.Connection.secureOkConnection,tuneConnection:f.Connection.tuneConnection,tuneOkConnection:f.Connection.tuneOkConnection,openConnection:f.Connection.openConnection,openOkConnection:f.Connection.openOkConnection,closeConnection:f.Connection.closeConnection,closeOkConnection:f.Connection.closeOkConnection,openChannel:f.Channel.openChannel,openOkChannel:f.Channel.openOkChannel,flowChannel:f.Channel.flowChannel,flowOkChannel:f.Channel.flowOkChannel,closeChannel:f.Channel.closeChannel,closeOkChannel:f.Channel.closeOkChannel,declareExchange:f.Exchange.declareExchange,declareOkExchange:f.Exchange.declareOkExchange,deleteExchange:f.Exchange.deleteExchange,deleteOkExchange:f.Exchange.deleteOkExchange,declareQueue:f.Queue.declareQueue,declareOkQueue:f.Queue.declareOkQueue,bindQueue:f.Queue.bindQueue,bindOkQueue:f.Queue.bindOkQueue,unbindQueue:f.Queue.unbindQueue,unbindOkQueue:f.Queue.unbindOkQueue,purgeQueue:f.Queue.purgeQueue,purgeOkQueue:f.Queue.purgeOkQueue,deleteQueue:f.Queue.deleteQueue,deleteOkQueue:f.Queue.deleteOkQueue,qosBasic:f.Basic.qosBasic,qosOkBasic:f.Basic.qosOkBasic,consumeBasic:f.Basic.consumeBasic,consumeOkBasic:f.Basic.consumeOkBasic,cancelBasic:f.Basic.cancelBasic,cancelOkBasic:f.Basic.cancelOkBasic,publishBasic:f.Basic.publishBasic,returnBasic:f.Basic.returnBasic,deliverBasic:f.Basic.deliverBasic,getBasic:f.Basic.getBasic,getOkBasic:f.Basic.getOkBasic,getEmptyBasic:f.Basic.getEmptyBasic,ackBasic:f.Basic.ackBasic,rejectBasic:f.Basic.rejectBasic,recoverAsyncBasic:f.Basic.recoverAsyncBasic,recoverBasic:f.Basic.recoverBasic,recoverOkBasic:f.Basic.recoverOkBasic,selectTx:f.Tx.selectTx,selectOkTx:f.Tx.selectOkTx,commitTx:f.Tx.commitTx,commitOkTx:f.Tx.commitOkTx,rollbackTx:f.Tx.rollbackTx,rollbackOkTx:f.Tx.rollbackOkTx},j=function(a){this.array=a||[],this._mark=-1,this.limit=this.capacity=this.array.length,this.order=$rootModule.ByteOrder.BIG_ENDIAN,this.bitCount=0};j.prototype=new $rootModule.ByteBuffer;var k=function(a,b){if(!a)throw new Error(b)},l={octet:"Unsigned","short":"UnsignedShort","long":"UnsignedInt",longlong:"UnsignedLong","int":"Int",table:"Table",longstr:"LongString",shortstr:"ShortString",bit:"Bit",fieldtable:"FieldTable",timestamp:"Timestamp","void":"Void"},m={F:"fieldtable",S:"longstr",I:"int",V:"void"},n={longstr:"S","int":"I","void":"V"},o=function(a,b){var c=new j;c.putShortString("LOGIN"),c.putTypeIdentifier("longstr"),c.putLongString(a),c.putShortString("PASSWORD"),c.putTypeIdentifier("longstr"),c.putLongString(b),c.rewind();for(var d=c.remaining(),e=[],f=0;d>f;f++)e.push(String.fromCharCode(c.getUnsigned()));return e.join("")};j.prototype.getLongString=function(){for(var a=this.getUnsignedInt(),b=[],c=0;a>c;c++)b.push(String.fromCharCode(this.getUnsigned()));return b.join("")},j.prototype.getShortString=function(){for(var a=this.getUnsigned(),b=[],c=0;a>c;c++)b.push(String.fromCharCode(this.getUnsigned()));return b.join("")},j.prototype.getVoid=function(){},j.prototype.getTypeIdentifier=function(){var a=this.getUnsigned();return m[String.fromCharCode(a)]},j.prototype.putTypeIdentifier=function(a){var b=n[a];this.putUnsigned(b.charCodeAt(0))},j.prototype.getFieldValue=function(){var a=this.getUnsigned();switch(String.fromCharCode(a)){case"t":return!!this.getUnsigned();default:throw new Error("Decoding Error in AmqpBuffer: cannot decode field value")}},j.prototype.getFieldTable=function(){for(var a=this.getUnsignedInt(),b={},c=this.position;a>this.position-c;){var d=this.getShortString(),e=this.getFieldValue();b[d]=e}return b},j.prototype.getTable=function(){var a=new AmqpArguments,b=this.getUnsignedInt(),c=new j(this.array.slice(this.position,this.position+b));for(this.position+=b;c.remaining();){var d={};d.key=c.getShortString();var e=c.getTypeIdentifier();d.value=c["get"+l[e]](),d.type=l[e],a.push(d)}return a},j.prototype.getBit=function(){return this.getUnsigned()},j.prototype.putBit=function(a){if(this.bitCount>0){var b=this.array[this.position-1];b=a<<this.bitCount|b,this.array[this.position-1]=b}else this.putUnsigned(a)},j.prototype.putUnsignedLong=function(a){return this.putInt(0),this.putUnsignedInt(a)},j.prototype.getUnsignedLong=function(){return this.getInt(),this.getUnsignedInt()},j.prototype.putTimestamp=function(a){for(var b=(a.getTime(),[0,0,0,0,0,0,0,0]),c=7;c>=0;c--){var d=255&a;b[c]=d,a=(a-d)/256}return this.putBytes(b),this},j.prototype.getTimestamp=function(){for(var a=this.getBytes(8),b=0,c=0;8>c;c++)b=256*b+(255&a[c]);return new Date(b)},j.prototype.putLongString=function(a){this.putUnsignedInt(a.length);for(var b=0;b<a.length;b++)this.putUnsigned(a.charCodeAt(b))},j.prototype.putShortString=function(a){this.putUnsigned(a.length);for(var b=0;b<a.length;b++)this.putUnsigned(a.charCodeAt(b))},j.prototype.putVoid=function(){},j.prototype.putTable=function(a){if(!a)return this.putUnsignedInt(0),this;for(var b=new j,c=0;c<a.length;c++){var d=a[c];b.putShortString(d.key),b.putTypeIdentifier(d.type),b["put"+l[d.type]](d.value)}return b.rewind(),this.putUnsignedInt(b.remaining()),this.putBuffer(b),this},j.prototype.getFrameHeader=function(){var a=this.getUnsigned(),b=this.getUnsignedShort(),c=this.getUnsignedInt(),d={};return d.type=a,d.size=c,d.channel=b,d},j.prototype.getFrame=function(){var a=this.position,b={};if(this.remaining()>7){if(b.header=this.getFrameHeader(),b.channel=b.header.channel,b.type=b.header.type,!(this.remaining()>=b.header.size+1))return this.position=a,null;switch(b.type){case d.FRAME_BODY.value:var c=new j(this.array.slice(this.position,this.position+b.header.size));this.position+=b.header.size,b.body=c,b.methodName="body";break;case d.FRAME_HEADER.value:{var e=this.getUnsignedShort();this.getUnsignedShort(),this.getUnsignedLong()}b.contentProperties=this.getContentProperties(),b.methodName="header";break;case d.FRAME_METHOD.value:var e=this.getUnsignedShort(),f=this.getUnsignedShort(),h=(g[e].className,g[e].methodLookup[f]),i=(g[e][h],g[e][h].allParameters);b.methodName=h,b.args=this.getMethodArguments(i);break;case 4:case d.FRAME_HEARTBEAT.value:throw new Error("Received heartbeat frame even though the client has expressed no interest in heartbeat via tune-ok method.");default:throw new Error("Unrecognized AMQP 0-9-1 Frame type = "+b.type)}return k(this.getUnsigned()===d.FRAME_END.value,"AMQP: Frame terminator missing"),b}return null},j.prototype.putFrame=function(a,b,c){this.putUnsigned(a),this.putUnsignedShort(b);var e=c.remaining();return this.putUnsignedInt(e),this.putBuffer(c),this.putUnsigned(d.FRAME_END.value),this},j.prototype.putMethodFrame=function(a,b,c){var e=new j;return e.putUnsignedShort(a.classIndex),e.putUnsignedShort(a.index),e.putMethodArguments(c,a.allParameters),e.flip(),this.putFrame(d.FRAME_METHOD.value,b,e)},j.prototype.putHeaderFrame=function(a,b,c,e,f){var g=new j;return g.putUnsignedShort(b),g.putUnsignedShort(c),g.putUnsignedLong(e),g.putContentProperties(f),g.flip(),this.putFrame(d.FRAME_HEADER.value,a,g)},j.prototype.putBodyFrame=function(a,b){return this.putFrame(d.FRAME_BODY.value,a,b)},j.prototype.putHeartbeat=function(){throw new Error("Heartbeat not implemented")},j.prototype.putMethodArguments=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],f=d.type,g=e[f];if(!g)throw new Error("Unknown AMQP domain "+f);var h=g.type;this["put"+l[h]](a[c]),this.bitCount="bit"===h?this.bitCount+1:0}return this},j.prototype.getMethodArguments=function(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],f=d.type,g=e[f].type,h={};h.type=g,h.name=d.name;try{var i=this["get"+l[g]]()}catch(j){throw new Error("type codec failed for type "+g+" for domain "+f)}this.bitCount="bit"===g?this.bitCount+1:0,h.value=i,b.push(h)}return b},j.prototype.putArgument=function(a,b){var c=e[a];if(!c)throw new Error("Unknown AMQP domain "+dtype);var d=c.type;this["put"+l[d]](b)},j.prototype.getArgument=function(a){try{return this["get"+l[a]]()}catch(b){throw new Error("type codec failed for type "+a+" for domain "+dtype)}},j.prototype.getContentProperties=function(){for(var a={},b=[],c=this.getUnsignedShort(),d=0;16>=d;d++){var f=c>>d&1;f&&b.unshift(d+1)}for(var d=0;d<b.length;d++){var g=16-b[d],h=_basicProperties[g].name,i=_basicProperties[g].domain,j=e[i];a[h]=this.getArgument(j.type)}return a},j.prototype.putContentProperties=function(a){if(!a)return this.putUnsignedShort(0);for(var b=0,c=[],d=0;d<_basicProperties.length;d++){var e=_basicProperties[d].name,f=_basicProperties[d].domain,g=a[e];"undefined"!=typeof g?(c.push({propertyName:e,propertyValue:g,domain:f}),b=b<<1|1):b<<=1}b<<=2,this.putUnsignedShort(b);for(var d=0;d<c.length;d++){var h=c[d],i=h.domain;this.putArgument(i,h.propertyValue)}return this},AmqpClient.prototype=new c;var p=AmqpClient.prototype;p.CLOSED=0,p.OPEN=1,p.CONNECTING=2,p.getReadyState=function(){return this._readyState},p.setReadyState=function(a){this._readyState=a},p.onopen=function(){},p.onclose=function(){},p.onerror=function(){};var k=function(a,b){if(!a)throw new Error(b)};p._init=function(){this._initAsyncClient(),this._buffer=new j,this._channels={},this._channelCount=0,this._stateMachine.addState("handshaking",[{inputs:["startConnectionFrame"],targetState:"starting"},{inputs:["closeConnectionFrame"],targetState:"closing"}],y),this._stateMachine.addState("starting",[{inputs:["startOkConnectionAction"],targetState:"started"}],A),this._stateMachine.addState("started",[{inputs:["tuneConnectionFrame"],targetState:"tuning"}]),this._stateMachine.addState("tuning",[{inputs:["tuneOkConnectionAction"],targetState:"tuned"}],B,D),this._stateMachine.addState("tuned",[{inputs:["openConnectionAction"],targetState:"opening"}]),this._stateMachine.addState("opening",[{inputs:["openOkConnectionFrame"],targetState:"ready"}],O,C),this._stateMachine.addState("ready",[{inputs:["openOkChannelFrame","closeChannelFrame","closeOkChannelFrame","flowOkChannelFrame","flowChannelFrame","declareOkExchangeFrame","declareOkQueueFrame","bindOkQueueFrame","unbindOkQueueFrame","deleteOkQueueFrame","deleteOkExchangeFrame","commitOkTxFrame","rollbackOkTxFrame","selectOkTxFrame","purgeOkQueueFrame","cancelOkBasicFrame","getOkBasicFrame","getEmptyBasicFrame","consumeOkBasicFrame","recoverOkBasicFrame","rejectOkBasicFrame","deliverBasicFrame","bodyFrame","headerFrame"],targetState:"ready"},{inputs:["closeConnectionFrame","closeConnectionAction"],targetState:"closing"}],E),this._stateMachine.addState("closing",[{inputs:["closeOkConnectionFrame","closeOkConnectionAction"],targetState:"closed"}],C,null),this._stateMachine.addState("closed",[],F,null)};var q={"0-9-1":[65,77,81,80,0,0,9,1]};p.connect=function(b,c,d,e){if(this._socket)throw new Error("AmqpClient already connected.");var f;f="string"==typeof b?[b]:b,this.setReadyState(this.CONNECTING);({url:f[0],virtualHost:c,credentials:d});this._openContinuation=e,this._hasNegotiated=!1,a(this,f[0],c,d)};var r=p.connect;p.connect=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.url,d=myConfig.virtualHost,e=myConfig.credentials;if(!c||"string"!=typeof c)throw new Error("AmqpClient.connect(): Parameter 'url' is required");if(!d||"string"!=typeof c)throw new Error("AmqpClient.connect(): Parameter 'virtualHost' is required");if(!e||!e.username||!e.password||"string"!=typeof e.username||"string"!=typeof e.password)throw new Error("AmqpClient.connect(): credentials are required");r.call(this,c,d,e,b)}else r.apply(this,arguments)},p.disconnect=function(){if(this.getReadyState()==this.OPEN&&R(this,0,"",0,0),this.getReadyState()==this.CONNECTING){this.setReadyState(this.CLOSED);var a={};a.methodName="closeConnection",a.type="closeConnection",a.args="";var b=new AmqpEvent(this,a);this.dispatchEvent(b)}},p.openChannel=function(a){var b=++this._channelCount,c=new $module.AmqpChannel;return G(c,b,this,a),this._channels[b]=c,c},p.getAmqpClientFactory=function(){return this._amqpClientFactory||null};var s=function(a){var b=new $rootModule.ByteBuffer(q["0-9-1"]),c=b;"undefined"!=typeof ArrayBuffer&&"arraybuffer"==a._socket.binaryType&&(c=b.getArrayBuffer(b.remaining())),a._socket.send(c)},t=function(a){F(a)},u=function(a,b){if(b.remaining()<a.length)return!1;var c=b.limit;b.limit=a.length;var d=b.getString($rootModule.Charset.UTF8);return b.limit=c,a===d},v=function(a,b){var c=b.data;"undefined"!=typeof ArrayBuffer&&"arraybuffer"==a._socket.binaryType&&(c=decodeArrayBuffer2ByteBuffer(b.data));var d=a._buffer;if(d.mark(),d.position=d.limit,d.putBuffer(c),d.reset(),!a._hasNegotiated&&d.remaining()>7){if(u("AMQP",d)){var e=[d.get(),d.get(),d.get(),d.get()],f={args:[{name:"replyText",value:"Server does not support AMQP protocol versions after "+e[2]+"-"+e[3]}],methodName:"closeOkConnection"},g={};return g.methodName="error",g.args=f.args,a.dispatchEvent(new AmqpEvent(a,g)),void F(a,"",f)}d.reset(),a._hasNegotiated=!0}for(var h=null;h=d.getFrame();){var i=h;a._stateMachine.feedInput(i.methodName+"Frame",i)}d.compact()},w=function(a,b){var c=b;"undefined"!=typeof ArrayBuffer&&"arraybuffer"==a._socket.binaryType&&(c=b.getArrayBuffer(b.remaining())),a._socket.send(c)},x=function(a,b,c,d){{var e=new j;b.classIndex}e.putMethodFrame(b,c,d),e.flip(),w(a,e)},y=function(a,b,c){var d=null;if(a._amqpClientFactory){var e=a._amqpClientFactory.getWebSocketFactory();e&&(d=e.createWebSocket(c.url))}if(null==d){if("undefined"==typeof WebSocket)throw new Error("Browser does not support WebSocket.");d=new WebSocket(c.url)}d.binaryType="undefined"==typeof ArrayBuffer?"bytebuffer":"arraybuffer",d.onopen=function(){s(a)},d.onclose=function(){t(a)},d.onmessage=function(b){v(a,b)},a._socket=d,a._virtualHost=c.virtualHost,a._credentialsOrKey=c.credentials},z=null,A=function(a,b,c){k(0===c.channel,d.UNEXPECTED_FRAME.message);var e=(new j,new AmqpArguments);e.addLongString("library","KaazingAmqpClient"),e.addLongString("library_version","5.0.0"),e.addLongString("library_platform","JavaScript");var f=a._locale||"en_US",g="AMQPLAIN",h=a._credentialsOrKey;if("function"!=typeof h.resolve){var i=o(h.username,h.password);z(a,e,g,i,f)}else h.resolve(function(b){var c=o(b.username,b.password);z(a,e,g,c,f)})},B=function(a,b,c){k(0===c.channel,d.UNEXPECTED_FRAME.message);var e=c.args[0].value,f=c.args[1].value,g=0;P(a,e,f,g),Q(a,a._virtualHost,a._openContinuation,a._openErrorCb)},C=function(a,b,c){if(!c||!c.actionName||"closeConnection"!=c.actionName){if("nowaitAction"===b)return void(a._waitingAction=null);var d={};d=d._connection?a._connection:a;var e=new AmqpEvent(a,c);if(!a._waitingAction)throw new Error("AmqpClient not in waiting state: protocol violation");if("closeChannelFrame"===b)a._waitingAction.error(e);else{if("closeConnection"==c.methodName){var f={};return f.methodName="error",f.args=c.args,d.dispatchEvent(new AmqpEvent(d,f)),void F(d,"",c)}"openOkConnection"==c.methodName?d.setReadyState(d.OPEN):a._waitingAction.continuation(e)}a.dispatchEvent(e),"openOkConnection"==c.methodName&&d._openContinuation()}},D=function(a){var b=a;setTimeout(function(){b._processActions()},0)},E=function(a,b,c){if(0===c.channel);else if(a._channels[c.channel]){var d=a._channels[c.channel];J(d,b,c)}},F=function(a,b,c){if(a.getReadyState()!=a.CLOSED){var d;if("undefined"==typeof c?d=new AmqpEvent(a,{args:[],methodName:"closeOkConnection"}):(c.methodName="closeOkConnection",d=new AmqpEvent(a,c)),a.dispatchEvent(d),a.setReadyState(a.CLOSED),"undefined"!=typeof a._channels)for(var e in a._channels){var f=a._channels[e];f.dispatchEvent(d)}}a._socket.onclose=function(){},(0==a._socket.readyState||1==a._socket.readyState)&&a._socket.close(),"undefined"!=typeof a._openErrorCb&&a._openErrorCb(d)},G=function(a,b,c,d){a._id=b,a._callbacks=d,a._connection=c,a._transacted=!1,a._waitingAction=null,a._initAsyncClient(),a._stateMachine.addState("channelReady",[{inputs:["openChannelAction","closeChannelAction","consumeBasicAction","flowChannelAction","declareExchangeAction","declareQueueAction","bindQueueAction","unbindQueueAction","deleteQueueAction","deleteExchangeAction","purgeQueueAction","cancelBasicAction","recoverBasicAction","rejectBasicAction","selectTxAction","commitTxAction","rollbackTxAction"],targetState:"waiting"},{inputs:["publishBasicAction","ackBasicAction"],targetState:"channelReady"},{inputs:["getBasicAction"],targetState:"getting"},{inputs:["deliverBasicFrame"],targetState:"readingContentHeader"}],D),a._stateMachine.addState("getting",[{inputs:["getOkBasicFrame"],targetState:"readingContentHeader"},{inputs:["getEmptyBasicFrame"],targetState:"channelReady"},{inputs:["closeChannelFrame"],targetState:"closing"}],O,N),a._stateMachine.addState("waiting",[{inputs:["openOkChannelFrame","closeOkChannelFrame","flowOkChannelFrame","declareOkExchangeFrame","declareOkQueueFrame","bindOkQueueFrame","unbindOkQueueFrame","deleteOkQueueFrame","deleteOkExchangeFrame","purgeOkQueueFrame","cancelOkBasicFrame","recoverOkBasicFrame","rejectOkBasicFrame","commitOkTxFrame","rollbackOkTxFrame","selectOkTxFrame","getOkBasicFrame","getEmptyBasicFrame","consumeOkBasicFrame","nowaitAction"],targetState:"channelReady"},{inputs:["closeChannelFrame"],targetState:"closing"}],O,C),a._stateMachine.addState("readingContentHeader",[{inputs:["headerFrame"],targetState:"readingContentBody"}],L,M),a._stateMachine.addState("readingContentBody",[{inputs:["bodyFrame"],targetState:"channelReady"}],null,K),a._stateMachine.addState("closing",[{inputs:["closeOkChannelAction"],targetState:"closed"}],null),a._stateMachine.addState("closed",null,null),c.getReadyState()==c.OPEN&&T(a,[d])},H=function(){};H.prototype=new c;var p=H.prototype;p._init=function(){};var I=function(a,b,c,d,e,f){var g=new j,h=b.classIndex;if(g.putMethodFrame(b,c,d),b.hasContent){var i=0;g.putHeaderFrame(c,h,i,e.remaining(),f),e.remaining()>0&&g.putBodyFrame(c,e)}g.flip(),w(a._connection,g)},J=function(a,b,c){if(c){var d=c.methodName||"";if("closeChannel"==d){var e={};return e.methodName="error",e.type="error",e.args=c.args,a.dispatchEvent(new AmqpEvent(a,e)),void a.dispatchEvent(new AmqpEvent(a,c))}}a._stateMachine.feedInput(b,c)},K=function(a,b,c){c.args=a._headerFrame.args,c.methodName=a._headerFrame.methodName;var d=new AmqpEvent(a,c,a._headerFrame.contentProperties);"getOkBasic"===c.methodName&&a._waitingAction.continuation(d),a.dispatchEvent(d)},L=function(a,b,c){a._headerFrame=c},M=function(a,b,c){a._headerFrame.contentProperties=c.contentProperties},N=function(a,b,c){var d=new AmqpEvent(a,c);if(!a._waitingAction)throw new Error("AmqpClient not in waiting state: protocol violation");"closeChannelFrame"===b?(a._waitingAction.error(d),a.dispatchEvent(d),a._waitingAction=null):"getEmptyBasicFrame"===b&&(a._waitingAction.continuation(d),a.dispatchEvent(d),a._waitingAction=null)},O=function(a,b,c){var d=c.args[1];if(!d.synchronous)throw new Error("AMQP: trying to enter wait state for method that is not sychronous");a._waitingAction=c};H.prototype.flowFlag=!0,H.prototype.onmessage=function(){},H.prototype.onclose=function(){},H.prototype.onerror=function(){},H.prototype.onopen=function(){},H.prototype.ondeclarequeue=function(){},H.prototype.ondeclareexchange=function(){},H.prototype.onflow=function(){},H.prototype.onbindqueue=function(){},H.prototype.onunbindqueue=function(){},H.prototype.ondeletequeue=function(){},H.prototype.ondeleteexchange=function(){},H.prototype.onconsume=function(){},H.prototype.oncancel=function(){},H.prototype.oncommittransaction=function(){},H.prototype.onrollbacktransaction=function(){},H.prototype.onselecttransaction=function(){},H.prototype.onget=function(){},H.prototype.onpurgequeue=function(){},H.prototype.onrecover=function(){},H.prototype.onreject=function(){};var z=function(a,b,c,d,e,f){var g=[b,c,d,e],i="startOkConnection";return a._enqueueAction(i,x,[a,h[i],0,g],f),a},P=function(a,b,c,d,e){var f=[b,c,d],g="tuneOkConnection";return a._enqueueAction(g,x,[a,h[g],0,f],e),a},Q=function(a,b,c){var d=[b,0,0],e="openConnection";return a._enqueueAction(e,x,[a,h[e],0,d],c),a},R=function(a,b,c,d,e,f){var g=[b,c,d,e],i="closeConnection";return a._enqueueAction(i,x,[a,h[i],0,g],f),a};H.prototype.openChannel=function(a){var b=[0],c="openChannel",d=h[c],e=!1;return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(c,I,[this,d,this._id,b],a),"flowChannel"==c&&(H.prototype.flowFlag=active),e&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.flowChannel=function(a,b){for(var c=[a],d="flowChannel",e=h[d],f=!1,g=0;g<e.allParameters.length;g++){var i=e.allParameters[g].name;if(i="noWait"){f=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(d,I,[this,e,this._id,c],b),"flowChannel"==d&&(H.prototype.flowFlag=a),f&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.flowOkChannel=function(a,b){for(var c=[a],d="flowOkChannel",e=h[d],f=!1,g=0;g<e.allParameters.length;g++){var i=e.allParameters[g].name;if(i="noWait"){f=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(d,I,[this,e,this._id,c],b),"flowChannel"==d&&(H.prototype.flowFlag=a),f&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.closeChannel=function(a,b,c,d,e){for(var f=[a,b,c,d],g="closeChannel",i=h[g],j=!1,k=0;k<i.allParameters.length;k++){var l=i.allParameters[k].name;if(l="noWait"){j=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(g,I,[this,i,this._id,f],e),"flowChannel"==g&&(H.prototype.flowFlag=active),j&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.closeOkChannel=function(a){var b=[],c="closeOkChannel",d=h[c],e=!1;return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(c,I,[this,d,this._id,b],a),"flowChannel"==c&&(H.prototype.flowFlag=active),e&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.declareExchange=function(a,b,c,d,e,f,g){for(var i=[0,a,b,c,d,0,0,e,f],j="declareExchange",k=h[j],l=!1,m=0;m<k.allParameters.length;m++){var n=k.allParameters[m].name;if(n="noWait"){l=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(j,I,[this,k,this._id,i],g),"flowChannel"==j&&(H.prototype.flowFlag=active),l&&"undefined"!=typeof e&&e&&this._enqueueAction("nowait"),this},H.prototype.deleteExchange=function(a,b,c,d){for(var e=[0,a,b,c],f="deleteExchange",g=h[f],i=!1,j=0;j<g.allParameters.length;j++){var k=g.allParameters[j].name;if(k="noWait"){i=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(f,I,[this,g,this._id,e],d),"flowChannel"==f&&(H.prototype.flowFlag=active),i&&"undefined"!=typeof c&&c&&this._enqueueAction("nowait"),this},H.prototype.declareQueue=function(a,b,c,d,e,f,g,i){for(var j=[0,a,b,c,d,e,f,g],k="declareQueue",l=h[k],m=!1,n=0;n<l.allParameters.length;n++){var o=l.allParameters[n].name;if(o="noWait"){m=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(k,I,[this,l,this._id,j],i),"flowChannel"==k&&(H.prototype.flowFlag=active),m&&"undefined"!=typeof f&&f&&this._enqueueAction("nowait"),this},H.prototype.bindQueue=function(a,b,c,d,e,f){for(var g=[0,a,b,c,d,e],i="bindQueue",j=h[i],k=!1,l=0;l<j.allParameters.length;l++){var m=j.allParameters[l].name;if(m="noWait"){k=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(i,I,[this,j,this._id,g],f),"flowChannel"==i&&(H.prototype.flowFlag=active),k&&"undefined"!=typeof d&&d&&this._enqueueAction("nowait"),this},H.prototype.unbindQueue=function(a,b,c,d,e){for(var f=[0,a,b,c,d],g="unbindQueue",i=h[g],j=!1,k=0;k<i.allParameters.length;k++){var l=i.allParameters[k].name;if(l="noWait"){j=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(g,I,[this,i,this._id,f],e),"flowChannel"==g&&(H.prototype.flowFlag=active),j&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.purgeQueue=function(a,b,c){for(var d=[0,a,b],e="purgeQueue",f=h[e],g=!1,i=0;i<f.allParameters.length;i++){var j=f.allParameters[i].name;if(j="noWait"){g=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(e,I,[this,f,this._id,d],c),"flowChannel"==e&&(H.prototype.flowFlag=active),g&&"undefined"!=typeof b&&b&&this._enqueueAction("nowait"),this},H.prototype.deleteQueue=function(a,b,c,d,e){for(var f=[0,a,b,c,d],g="deleteQueue",i=h[g],j=!1,k=0;k<i.allParameters.length;k++){var l=i.allParameters[k].name;if(l="noWait"){j=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(g,I,[this,i,this._id,f],e),"flowChannel"==g&&(H.prototype.flowFlag=active),j&&"undefined"!=typeof d&&d&&this._enqueueAction("nowait"),this},H.prototype.qosBasic=function(a,b,c,d){for(var e=[a,b,c],f="qosBasic",g=h[f],i=!1,j=0;j<g.allParameters.length;j++){var k=g.allParameters[j].name;if(k="noWait"){i=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(f,I,[this,g,this._id,e],d),"flowChannel"==f&&(H.prototype.flowFlag=active),i&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.consumeBasic=function(a,b,c,d,e,f,g,i){for(var j=[0,a,b,c,d,e,f,g],k="consumeBasic",l=h[k],m=!1,n=0;n<l.allParameters.length;n++){var o=l.allParameters[n].name;if(o="noWait"){m=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(k,I,[this,l,this._id,j],i),"flowChannel"==k&&(H.prototype.flowFlag=active),m&&"undefined"!=typeof f&&f&&this._enqueueAction("nowait"),this},H.prototype.cancelBasic=function(a,b,c){for(var d=[a,b],e="cancelBasic",f=h[e],g=!1,i=0;i<f.allParameters.length;i++){var j=f.allParameters[i].name;if(j="noWait"){g=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(e,I,[this,f,this._id,d],c),"flowChannel"==e&&(H.prototype.flowFlag=active),g&&"undefined"!=typeof b&&b&&this._enqueueAction("nowait"),this},H.prototype.publishBasic=function(a,b,c,d,e,f,g){for(var i=[0,c,d,e,f],j="publishBasic",k=h[j],l=!1,m=0;m<k.allParameters.length;m++){var n=k.allParameters[m].name;if(n="noWait"){l=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(j,I,[this,k,this._id,i,a,b],g),"flowChannel"==j&&(H.prototype.flowFlag=active),l&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.getBasic=function(a,b,c){for(var d=[0,a,b],e="getBasic",f=h[e],g=!1,i=0;i<f.allParameters.length;i++){var j=f.allParameters[i].name;if(j="noWait"){g=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(e,I,[this,f,this._id,d],c),"flowChannel"==e&&(H.prototype.flowFlag=active),g&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.ackBasic=function(a,b,c){for(var d=[a,b],e="ackBasic",f=h[e],g=!1,i=0;i<f.allParameters.length;i++){var j=f.allParameters[i].name;if(j="noWait"){g=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(e,I,[this,f,this._id,d],c),"flowChannel"==e&&(H.prototype.flowFlag=active),g&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.rejectBasic=function(a,b,c){for(var d=[a,b],e="rejectBasic",f=h[e],g=!1,i=0;i<f.allParameters.length;i++){var j=f.allParameters[i].name;if(j="noWait"){g=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(e,I,[this,f,this._id,d],c),"flowChannel"==e&&(H.prototype.flowFlag=active),g&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.recoverBasic=function(a,b){for(var c=[a],d="recoverBasic",e=h[d],f=!1,g=0;g<e.allParameters.length;g++){var i=e.allParameters[g].name;if(i="noWait"){f=!0;break}}return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(d,I,[this,e,this._id,c],b),"flowChannel"==d&&(H.prototype.flowFlag=active),f&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},_basicProperties=[{name:"contentType",domain:"Shortstr",label:"MIME content type"},{name:"contentEncoding",domain:"Shortstr",label:"MIME content encoding"},{name:"headers",domain:"Table",label:"message header field table"},{name:"deliveryMode",domain:"Octet",label:"non-persistent (1) or persistent (2)"},{name:"priority",domain:"Octet",label:"message priority, 0 to 9"},{name:"correlationId",domain:"Shortstr",label:"application correlation identifier"},{name:"replyTo",domain:"Shortstr",label:"address to reply to"},{name:"expiration",domain:"Shortstr",label:"message expiration specification"},{name:"messageId",domain:"Shortstr",label:"application message identifier"},{name:"timestamp",domain:"Timestamp",label:"message timestamp"},{name:"type",domain:"Shortstr",label:"message type name"},{name:"userId",domain:"Shortstr",label:"creating user id"},{name:"appId",domain:"Shortstr",label:"creating application id"},{name:"reserved",domain:"Shortstr",label:"reserved, must be empty"}],H.prototype.selectTx=function(a){var b=[],c="selectTx",d=h[c],e=!1;return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(c,I,[this,d,this._id,b],a),"flowChannel"==c&&(H.prototype.flowFlag=active),e&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.commitTx=function(a){var b=[],c="commitTx",d=h[c],e=!1;return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(c,I,[this,d,this._id,b],a),"flowChannel"==c&&(H.prototype.flowFlag=active),e&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this},H.prototype.rollbackTx=function(a){var b=[],c="rollbackTx",d=h[c],e=!1;return this._connection._readyState==this._connection.OPEN&&this._enqueueAction(c,I,[this,d,this._id,b],a),"flowChannel"==c&&(H.prototype.flowFlag=active),e&&"undefined"!=typeof noWait&&noWait&&this._enqueueAction("nowait"),this};var S=H.prototype.openChannel,T=function(a,b){a._stateMachine.enterState("channelReady","",null),S.apply(a,b)};delete H.prototype.openChannel;H.prototype.closeOkChannel;delete H.prototype.closeOkChannel;var U=H.prototype.closeChannel;H.prototype.closeChannel=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.replyCode||0,d=myConfig.replyText||"",e=myConfig.classId||0,f=myConfig.methodId||0;if("number"!=typeof c)throw new Error("AmqpChannel.closeChannel(): Parameter 'replyCode' is expected to be of numeric type");if("string"!=typeof d)throw new Error("AmqpChannel.closeChannel(): Parameter 'replyText' is expected to be a string");if("number"!=typeof e)throw new Error("AmqpChannel.closeChannel(): Parameter 'classId' is expected to be of numeric type");if("number"!=typeof f)throw new Error("AmqpChannel.closeChannel(): Parameter 'methodId' is expected to be of numeric type");return U.call(this,c,d,e,f,b)}return U.apply(this,arguments)};var V=H.prototype.declareExchange;H.prototype.declareExchange=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.exchange,d=myConfig.type,e=myConfig.passive||!1,f=myConfig.durable||!1,g=myConfig.noWait||!1,h=myConfig.args||null;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.declareExchange(): String parameter 'exchange' is required");if(!d||"string"!=typeof d||"fanout"!=d&&"direct"!=d&&"topic"!=d&&"headers"!=d)throw new Error("AmqpChannel.declareExchange(): Legal values of parameter 'type' are direct | fanout | headers | topic");if("boolean"!=typeof e)throw new Error("AmqpChannel.declareExchange(): Parameter 'passive' only accepts boolean values");if("boolean"!=typeof f)throw new Error("AmqpChannel.declareExchange(): Parameter 'durable' only accepts boolean values");if("boolean"!=typeof g)throw new Error("AmqpChannel.declareExchange(): Parameter 'noWait' only accepts boolean values");return V.call(this,c,d,e,f,g,h,b)}return V.apply(this,arguments)};var W=H.prototype.deleteExchange;
H.prototype.deleteExchange=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.exchange,d=myConfig.ifUnused||!1,e=myConfig.noWait||!1;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.deleteExchange(): String parameter 'exchange' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.deleteExchange(): Parameter 'ifUnused' only accepts boolean values");if("boolean"!=typeof e)throw new Error("AmqpChannel.deleteExchange(): Parameter 'noWait' only accepts boolean values");return W.call(this,c,d,e,b)}return W.apply(this,arguments)};var X=H.prototype.declareQueue;H.prototype.declareQueue=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.passive||!1,e=myConfig.durable||!1,f=myConfig.exclusive||!1,g=myConfig.autoDelete||!1,h=myConfig.noWait||!1,i=myConfig.args||null;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.declareQueue(): String parameter 'queue' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.declareQueue(): Parameter 'passive' only accepts boolean values");if("boolean"!=typeof e)throw new Error("AmqpChannel.declareQueue(): Parameter 'durable' only accepts boolean values");if("boolean"!=typeof f)throw new Error("AmqpChannel.declareQueue(): Parameter 'exclusive' only accepts boolean values");if("boolean"!=typeof g)throw new Error("AmqpChannel.declareQueue(): Parameter 'autoDelete' only accepts boolean values");if("boolean"!=typeof h)throw new Error("AmqpChannel.declareQueue(): Parameter 'noWait' only accepts boolean values");return X.call(this,c,d,e,f,g,h,i,b)}return X.apply(this,arguments)};var Y=H.prototype.bindQueue;H.prototype.bindQueue=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.exchange,e=myConfig.routingKey,f=myConfig.noWait||!1,g=myConfig.args||null;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.bindQueue(): String parameter 'queue' is required");if(!d||"string"!=typeof d)throw new Error("AmqpChannel.bindQueue(): String parameter 'exchange' is required");if(!e||"string"!=typeof e)throw new Error("AmqpChannel.bindQueue(): String parameter 'routingKey' is required");if("boolean"!=typeof f)throw new Error("AmqpChannel.bindQueue(): Parameter 'noWait' only accepts boolean values");return Y.call(this,c,d,e,f,g,b)}return Y.apply(this,arguments)};var Z=H.prototype.unbindQueue;H.prototype.unbindQueue=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.exchange,e=myConfig.routingKey,f=myConfig.args||null;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.unbindQueue(): String parameter 'queue' is required");if(!d||"string"!=typeof d)throw new Error("AmqpChannel.unbindQueue(): String parameter 'exchange' is required");if(!e||"string"!=typeof e)throw new Error("AmqpChannel.unbindQueue(): String parameter 'routingKey' is required");return Z.call(this,c,d,e,f,b)}return Z.apply(this,arguments)};var $=H.prototype.purgeQueue;H.prototype.purgeQueue=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.noWait||!1;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.purgeQueue(): String parameter 'queue' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.purgeQueue(): Parameter 'noWait' only accepts boolean values");return $.call(this,c,d,b)}return $.apply(this,arguments)};var _=H.prototype.deleteQueue;H.prototype.deleteQueue=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.ifUnused||!1,e=myConfig.ifEmpty||!1,f=myConfig.noWait||!1;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.deleteQueue(): String parameter 'queue' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.deleteQueue(): Parameter 'ifUnused' only accepts boolean values");if("boolean"!=typeof e)throw new Error("AmqpChannel.deleteQueue(): Parameter 'ifEmpty' only accepts boolean values");if("boolean"!=typeof f)throw new Error("AmqpChannel.deleteQueue(): Parameter 'noWait' only accepts boolean values");return _.call(this,c,d,e,f,b)}return _.apply(this,arguments)};var ab=H.prototype.qosBasic;H.prototype.qosBasic=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.prefetchSize||0,d=myConfig.prefetchCount||0,e=myConfig.global||!1;if("number"!=typeof c)throw new Error("AmqpChannel.qosBasic(): Parameter 'prefetchSize' is expected to be of numeric type");if("number"!=typeof d)throw new Error("AmqpChannel.qosBasic(): Parameter 'prefetchCount' is expected to be of numeric type");if("boolean"!=typeof e)throw new Error("AmqpChannel.qosBasic(): Parameter 'global' only accepts boolean values");return ab.call(this,c,d,e,b)}return ab.apply(this,arguments)};var bb=H.prototype.consumeBasic;H.prototype.consumeBasic=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.consumerTag,e=myConfig.noLocal||!1,f=!0,g=myConfig.exclusive||!1,h=myConfig.noWait||!1,i=myConfig.args||null;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.consumeBasic(): String parameter 'queue' is required");if(!d||"string"!=typeof d)throw new Error("AmqpChannel.consumeBasic(): String parameter 'consumerTag' is required");if("boolean"!=typeof e)throw new Error("AmqpChannel.consumeBasic(): Parameter 'noLocal' only accepts boolean values");if("undefined"!=typeof myConfig.noAck){if("boolean"!=typeof myConfig.noAck)throw new Error("AmqpChannel.consumeBasic(): Parameter 'noAck' only accepts boolean values");f=myConfig.noAck}if("boolean"!=typeof g)throw new Error("AmqpChannel.consumeBasic(): Parameter 'exclusive' only accepts boolean values");if("boolean"!=typeof h)throw new Error("AmqpChannel.consumeBasic(): Parameter 'noWait' only accepts boolean values");return bb.call(this,c,d,e,f,g,h,i,b)}return bb.apply(this,arguments)};var cb=H.prototype.cancelBasic;H.prototype.cancelBasic=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.consumerTag,d=myConfig.noWait||!1;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.cancelBasic(): String parameter 'consumerTag' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.cancelBasic(): Parameter 'noWait' only accepts boolean values");return cb.call(this,c,d,b)}return cb.apply(this,arguments)};var db=H.prototype.publishBasic;H.prototype.publishBasic=function(a,b){if("object"==typeof a&&a.body){myConfig=a||{};var c=myConfig.body,d=myConfig.properties,e=myConfig.exchange,f=myConfig.routingKey,g=myConfig.mandatory||!1,h=myConfig.immediate||!1,i=null;if(!c)throw new Error("AmqpChannel.publishBasic(): 'body' is a required parameter.");if("undefined"!=typeof ArrayBuffer&&c instanceof ArrayBuffer)i=decodeArrayBuffer2ByteBuffer(c);else{if(!(c instanceof $rootModule.ByteBuffer))throw new Error("AmqpChannel.publishBasic(): 'body' should be an instance of either ArrayBuffer or ByteBuffer");i=c}if(!e||"string"!=typeof e)throw new Error("AmqpChannel.publishBasic(): String parameter 'exchange' is required");if(!f||"string"!=typeof f)throw new Error("AmqpChannel.publishBasic(): String parameter 'routingKey' is required");if("boolean"!=typeof g)throw new Error("AmqpChannel.publishBasic(): Parameter 'mandatory' only accepts boolean values");if("boolean"!=typeof h)throw new Error("AmqpChannel.publishBasic(): Parameter 'immediate' only accepts boolean values");var j={};return void 0!=d&&(j=d.getProperties()),db.call(this,i,j,e,f,g,h,b)}return db.apply(this,arguments)};var eb=H.prototype.getBasic;H.prototype.getBasic=function(a,b){if("object"==typeof a){myConfig=a||{};var c=myConfig.queue,d=myConfig.noAck||!1;if(!c||"string"!=typeof c)throw new Error("AmqpChannel.getBasic(): String parameter 'queue' is required");if("boolean"!=typeof d)throw new Error("AmqpChannel.getBasic(): Parameter 'noAck' only accepts boolean values");return eb.call(this,c,d,b)}return eb.apply(this,arguments)};var fb=H.prototype.ackBasic;H.prototype.ackBasic=function(a){if("object"==typeof a){myConfig=a||{};var b=myConfig.deliveryTag,c=myConfig.multiple||!1;if(!b||"number"!=typeof b)throw new Error("AmqpChannel.ackBasic(): Numeric parameter 'deliveryTag' is required");if("boolean"!=typeof c)throw new Error("AmqpChannel.ackBasic(): Parameter 'multiple' only accepts boolean values");return fb.call(this,b,c,null)}return fb.apply(this,arguments)};var gb=H.prototype.rejectBasic;H.prototype.rejectBasic=function(a){if("object"==typeof a){myConfig=a||{};var b=myConfig.deliveryTag,c=myConfig.requeue||!1;if(!b||"number"!=typeof b)throw new Error("AmqpChannel.rejectBasic(): Numeric parameter 'deliveryTag' is required");if("boolean"!=typeof c)throw new Error("AmqpChannel.rejectBasic(): Parameter 'requeue' only accepts boolean values");return gb.call(this,b,c,null)}return gb.apply(this,arguments)};var hb=function(){this._actionList=new Array,this.currentAction=0,this._replayLength=0};hb.prototype.getActionList=function(){return this._actionList},hb.prototype.setReplayLength=function(a){this._replayLength=a},hb.prototype._processActions=function(){if(this._actionList.length){this.currentAction==this._actionList.length&&(this.currentAction=0);var a=this._actionList[this.currentAction];this.currentAction++,a.func.apply(a.object,a.args)}},hb.prototype._processAllActions=function(){for(i=0;i<this._replayLength;i++){var a=this._actionList[i];a.func.apply(a.object,a.args)}},hb.prototype._processAllNewActions=function(){for(i=this._replayLength;i<this._actionList.length;i++){var a=this._actionList[i];a.func.apply(a.object,a.args)}},hb.prototype._addAction=function(a,b,c,d){switch(a){case"declareExchange":break;case"declareQueue":break;case"bindQueue":break;case"consumeBasic":break;default:return}var e=function(){},f={};f.object=b,f.func=c||e,f.args=d||null,this._actionList.push(f)},$module.AmqpClient=AmqpClient,$module.AmqpChannel=H}();var AmqpArguments=function(){};AmqpArguments.prototype=new Array,function(a){var b=AmqpArguments.prototype,c=function(a,b,c,d){var e={};e.key=b,e.value=c,null==c&&(d="void"),e.type=d,a.push(e)};b.addLongString=function(a,b){return c(this,a,b,"longstr"),this},b.addInteger=function(a,b){return c(this,a,b,"int"),this},b.toString=function(){for(var a=[],b=0;b<this.length;b++)null!=this[b].key&&a.push("{key:"+this[b].key+", value:"+this[b].value+", type:"+this[b].type+"}");return"{"+a.join(", ")+"}"},a.AmqpArguments=AmqpArguments}(Kaazing.AMQP);var AmqpProperties=function(a){if(this._properties={},null!=a){var b=!1;for(var c in a){b=!1;for(var d=0;d<_basicProperties.length;d++)if(c==_basicProperties[d].name){b=!0;break}if(!b)throw new Error("Illegal property: '"+c.getKey()+"' passed")}for(var e in a){var f=a[e];if("appId"==e||"contentType"==e||"contentEncoding"==e||"correlationId"==e||"expiration"==e||"messageId"==e||"replyTo"==e||"type"==e||"userId"==e){if(null!=f&&"string"!=typeof f){var g="Invalid type: Value of '"+e+"' should be of type String";throw new Error(g)}}else if("headers"==e){if(null!=f&&!(f instanceof AmqpArguments))throw g="Invalid type: Value of '"+e+"' should be of type AmqpArguments",new Error(g)}else{if("timestamp"==e){if(null!=f&&f.getMonth&&f.getMonth.call)continue;var g="Invalid type: Value of '"+e+"' should be of type Date";throw new Error(g)}if("deliveryMode"==e){if(null!=f&&"number"!=typeof f){var g="Invalid type: Value of '"+e+"' should be of type Integer";throw new Error(g)}if(1!=f&&2!=f){var g="Invalid value: Value of '"+e+"' should be either 1(non-persistent) or 2(persistent)";throw new Error(g)}}else{if("priority"!=e){var g="Illegal property '"+e+"' specified";throw new Error(g)}if(null!=f&&"number"!=typeof f){var g="Invalid type: Value of '"+e+"' should be of type Integer";throw new Error(g)}if(0>f||f>9){var g="Invalid value: Value of property '"+e+"' should be between 0 and 9";throw new Error(g)}}}}this._properties=a}};!function(){var a=AmqpProperties.prototype;a.getAppId=function(){return this._properties.appId},a.getContentType=function(){return this._properties.contentType},a.getContentEncoding=function(){return this._properties.contentEncoding},a.getCorrelationId=function(){return this._properties.correlationId},a.getDeliveryMode=function(){return parseInt(this._properties.deliveryMode)},a.getExpiration=function(){return this._properties.expiration},a.getHeaders=function(){return this._properties.headers},a.getMessageId=function(){return this._properties.messageId},a.getPriority=function(){return parseInt(this._properties.priority)},a.getProperties=function(){var a={};for(var b in this._properties)null!=this._properties[b]&&(a[b]=this._properties[b]);return a},a.getReplyTo=function(){return this._properties.replyTo},a.getTimestamp=function(){return this._properties.timestamp},a.getType=function(){return this._properties.type},a.getUserId=function(){return this._properties.userId},a.setAppId=function(a){this._properties.appId=a},a.setContentType=function(a){this._properties.contentType=a},a.setContentEncoding=function(a){this._properties.contentEncoding=a},a.setCorrelationId=function(a){this._properties.correlationId=a},a.setDeliveryMode=function(a){if(null==a){var b="Null parameter passed into AmqpProperties.setPriority()";throw new Error(b)}if(1!=a&&2!=a)throw b="AMQP 0-9-1 spec mandates 'deliveryMode' value to be either 1(for non-persistent) or 2(for persistent)",new Error(b);this._properties.deliveryMode=a},a.setExpiration=function(a){this._properties.expiration=a},a.setHeaders=function(a){this._properties.headers=a},a.setMessageId=function(a){this._properties.messageId=a},a.setPriority=function(a){if(null==a){var b="Null parameter passed into AmqpProperties.setPriority()";throw new Error(b)}if(0>a||a>9)throw b="AMQP 0-9-1 spec mandates 'priority' value to be between 0 and 9",new Error(b);this._properties.priority=a},a.setReplyTo=function(a){this._properties.replyTo=a},a.setTimestamp=function(a){null!=a&&a.getMonth&&a.getMonth.call&&(s="AmqpProperties.setTimestamp() expects a Date"),this._properties.timestamp=a},a.setType=function(a){this._properties.type=a},a.setUserId=function(a){this._properties.userId=a},a.toString=function(){if(null==this._properties||0==this._properties.length)return"";var a=[];for(var b in this._properties)null!=this._properties[b]&&a.push(b+":"+this._properties[b]);return"{"+a.join(", ")+"}"},$module.AmqpProperties=AmqpProperties}(Kaazing.AMQP),function(a){var b=function(a){switch(a){case"deliverBasic":return"message";case"closeOkChannel":case"closeChannel":case"closeOkConnection":case"closeConnection":return"close";case"getOkBasic":case"getEmptyBasic":return"get";case"consumeOkBasic":return"consume";case"cancelOkBasic":return"cancel";case"openOkConnection":case"openOkChannel":return"open";case"declareOkQueue":return"declarequeue";case"declareOkExchange":return"declareexchange";case"flowOkChannel":return"flow";case"bindOkQueue":return"bindqueue";case"unbindOkQueue":return"unbindqueue";case"deleteOkQueue":return"deletequeue";case"deleteOkExchange":return"deleteexchange";case"commitOkTx":return"committransaction";case"rollbackOkTx":return"rollbacktransaction";case"selectOkTx":return"selecttransaction";case"purgeOkQueue":return"purgequeue";case"recoverOkBasic":return"recover";case"rejectOkBasic":return"reject";case"error":return"error";default:throw new Error("AMQP: unknown event name "+a)}};AmqpEvent=function(a,c,d){this.type=c.methodName,this.type=b(this.type),this.args={};for(var e=0;e<c.args.length;e++)this.args[c.args[e].name]=c.args[e].value;this.headers=d,this.target=a,this._body=c.body,"message"==this.type&&(this.properties=new AmqpProperties(d)),"error"==this.type&&(this.message=this.args.replyText)};var c=AmqpEvent.prototype;c.type,c.message,c.headers,c.properties,c.target,c.getBodyAsArrayBuffer=function(){if("undefined"==typeof ArrayBuffer)throw new Error("AmqpEvent.getBodyAsArrayBuffer(): Browser does not support ArrayBuffer.");return"undefined"!=typeof this._body?this._body.getArrayBuffer(this._body.remaining()):null},c.getBodyAsByteBuffer=function(){return this._body||null},a.AmqpEvent=AmqpEvent}(Kaazing.AMQP);var AmqpClientFactory=function(){$gatewayModule&&"function"==typeof $gatewayModule.WebSocketFactory&&(this._webSocketFactory=new $gatewayModule.WebSocketFactory)};!function(a){var b=AmqpClientFactory.prototype;b.createAmqpClient=function(){return new AmqpClient(this)},b.getWebSocketFactory=function(){return this._webSocketFactory||null},b.setWebSocketFactory=function(a){if(null===a||"undefined"==typeof a)throw new Error("AmqpClientFactory.setWebSocketFactory(): 'factory' is required parameter.");if(!(a instanceof $gatewayModule.WebSocketFactory))throw new Error("AmqpClientFactory.setWebSocketFactory(): 'factory' must be an instance of WebSocketFactory.");this._webSocketFactory=a},a.AmqpClientFactory=AmqpClientFactory}(Kaazing.AMQP);